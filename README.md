# AI CV Maker Application

This project is a modern landing page for an AI-powered CV Maker. Users can input a job title or description to get a tailored CV outline generated by AI.

## Key Features

*   AI-powered CV outline generation via a backend service.
*   Responsive design with Tailwind CSS.
*   Interactive UI built with React.
*   **Simulated User Authentication**:
    *   Login/Sign Up with Email/Password.
    *   Simulated "Sign in with Google" and "Sign in with LinkedIn".
    *   Authentication requests are now handled by a simulated backend.
*   Node.js/Express backend (`server/main.js`) to handle API calls securely.

## Architecture Overview

The application exclusively uses a **frontend-backend architecture** for its core CV generation and (simulated) authentication features:

1.  **Frontend (React + Vite)**: The user interface built with React and served by Vite. It captures user input for CV generation and authentication, sending requests to the backend.
2.  **Backend (Node.js/Express)**: A Node.js server (`server/main.js`) that:
    *   Receives CV generation requests, calls the Google Gemini API with the necessary API key, and returns the result.
    *   Receives authentication requests, processes them against a MySQL database, and returns user data/mock tokens. Passwords are hashed using `bcrypt`.

This approach ensures API keys are managed securely on the server-side.

## Running the Application

You need to run both the backend server and the frontend development server.

### 1. Backend Server Setup & Run

1.  **Navigate to the project root directory.**
2.  **Install backend dependencies:**
    ```bash
    npm install
    ```
    (This will install `express`, `@google/genai`, `dotenv`, `mysql2`, `bcrypt` from `package.json`.)
3.  **Set up MySQL Database:**
    *   **Option A: Using Docker (Recommended for local development)**
        1.  Ensure you have Docker installed and running.
        2.  Open a terminal and run the following command to start a MySQL container:
            ```bash
            docker run --name mysql-aicv -e MYSQL_ROOT_PASSWORD=password -e MYSQL_DATABASE=aicvmakeroauth -p 3306:3306 -d mysql:8
            ```
            This command does the following:
            *   `--name mysql-aicv`: Assigns a name to your container.
            *   `-e MYSQL_ROOT_PASSWORD=password`: Sets the root password for MySQL. **Change `password` to a strong password in a real production setup.**
            *   `-e MYSQL_DATABASE=aicvmakeroauth`: Creates a database named `aicvmakeroauth` upon startup.
            *   `-p 3306:3306`: Maps port 3306 of your host machine to port 3306 of the container.
            *   `-d mysql:8`: Runs the MySQL version 8 image in detached mode.
        3.  You can connect to this database using a MySQL client (like DBeaver, MySQL Workbench, or `mysql` CLI) at `localhost:3306` with user `root` and the password you set.
    *   **Option B: Local MySQL Installation**
        1.  Install MySQL server on your machine if you haven't already.
        2.  Create a database (e.g., `aicvmakeroauth`).
        3.  Create a user with privileges to access this database.
4.  **Create an environment file:**
    Create a file named `.env` in the project root directory (next to `package.json` and `server/main.js`).
5.  **Add your API Key and Database Credentials to `.env`:**
    Open the `.env` file and add your Google Gemini API key and MySQL connection details:
    ```dotenv
    API_KEY=YOUR_ACTUAL_GEMINI_API_KEY

    # MySQL Database Configuration
    DB_HOST=localhost
    DB_USER=root
    DB_PASSWORD=password # Use the password you set for Docker or your local MySQL
    DB_NAME=aicvmakeroauth
    DB_PORT=3306 # Optional, defaults to 3306 if not specified by mysql2
    ```
    Replace `YOUR_ACTUAL_GEMINI_API_KEY` with your real key. Adjust `DB_USER`, `DB_PASSWORD`, and `DB_NAME` according to your MySQL setup. If you used the Docker command above, `DB_USER` is `root`, `DB_PASSWORD` is `password`, and `DB_NAME` is `aicvmakeroauth`.
6.  **Start the backend server:**
    ```bash
    node server/main.js
    ```
    The backend server will typically start on `http://localhost:3001`. Check the console output for the exact port. It will also attempt to connect to the MySQL database and create the `users` table if it doesn't exist.

### 2. Frontend Setup & Run

1.  **Open a new terminal window/tab.**
2.  **Navigate to the project root directory.**
3.  **Install frontend dependencies (if not already done):**
    The `npm install` in the backend setup should cover all dependencies listed in `package.json`.
4.  **Start the frontend development server (Vite):**
    ```bash
    npm run dev
    ```
    This will usually start the frontend on `http://localhost:5174` (or another port if 5174 is busy) and open it in your browser.

    **API Proxying**: The `vite.config.ts` file is configured to proxy API requests from the frontend (e.g., to `/api/cv/generate` or `/api/auth/*`) to the backend server running on `http://localhost:3001`. This allows the frontend to make requests to relative paths like `/api/...` and have them correctly routed to the backend during development.

## API Key Management

*   The **Google Gemini API Key (`API_KEY`) is CRUCIAL** for CV generation and is managed **exclusively by the backend server (`server/main.js`)**.
*   It **must** be set in an `.env` file in the project root.
*   The frontend's CV generation logic (`components/HeroSection.tsx`) exclusively calls the backend.

## Authentication (Simulated Backend)

*   The application features a **simulated authentication system** with backend interaction.
*   Users can "Login" or "Sign Up" using the modal. Email/Password, Google, and LinkedIn options make requests to the backend.
*   **Backend (`server/main.js`):**
    *   Handles requests to `/api/auth/signup`, `/api/auth/login`, `/api/auth/google`, `/api/auth/linkedin`.
    *   Uses a **MySQL database** to store user data.
    *   **Passwords are hashed using `bcrypt`** before being stored in the database.
    *   Mock JWT tokens are returned upon successful authentication.
*   This setup provides a more robust and secure authentication flow compared to the previous in-memory simulation. **For production, further enhancements like secure session management (beyond mock JWTs) and real OAuth 2.0 integration for social logins are recommended.**

## Database Schema (MySQL)

The `users` table has the following basic structure, created automatically if it doesn't exist:

```sql
CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL, -- Stores hashed password
  name VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## Update Instructions & Changelog

### Vite Proxy Configuration Added
*   **`vite.config.ts` (New):** Added to configure Vite's dev server to proxy `/api` requests to the backend at `http://localhost:3001`.
*   **`README.md` (Updated):** Documented the proxy setup.

### MySQL Authentication Backend
*   **`server/main.js` (Updated):**
    *   Integrated `mysql2` for database operations.
    *   Replaced in-memory user store with MySQL `users` table.
    *   Implemented password hashing using `bcrypt` for signup and login.
    *   Updated social login mocks to interact with the database.
    *   Added database and table initialization logic.
*   **`package.json` (Updated):** Added `mysql2` and `bcrypt` to dependencies.

### Previously: Simulated Backend Authentication Added
*   **`services/authService.ts` (New):** Frontend service to make API calls to backend auth endpoints.
*   **`components/AuthModal.tsx` (Updated):** Now uses `authService.ts` to interact with the backend for auth.
*   **`App.tsx` (Updated):** `User` interface updated.

### Previously: CV Generation Exclusively Uses Backend
*   **`components/HeroSection.tsx`**: Exclusively calls `generateCVContent` (backend).
Previous states involved direct frontend API calls for CV generation and UI-only mock authentication.