
# AI CV Maker Application
#Never ever change the gemini model anywhere keep it as it is now.

This project is a modern landing page for an AI-powered CV Maker. Users can input a job title or description to get a tailored CV outline generated by AI. It features distinct dashboards for regular users and administrators.

## Key Features

*   AI-powered CV outline generation via a backend service.
*   Responsive design with Tailwind CSS.
*   Interactive UI built with React.
*   **User Authentication with Roles**:
    *   Login/Sign Up with Email/Password.
    *   **Sign in with Google (OAuth 2.0)**.
    *   Authentication requests are handled by the backend.
    *   Users can have 'user' or 'admin' roles, providing access to different dashboards.
*   Node.js/Express backend (`server/main.js`) to handle API calls securely.
*   Separate **User Dashboard** and **Admin Dashboard**.

## Architecture Overview

The application exclusively uses a **frontend-backend architecture**:

1.  **Frontend (React + Vite)**: The user interface built with React and served by Vite. It captures user input for CV generation. For Google Sign-In, it uses Google Identity Services (GIS) to obtain an ID token, which is then sent to the backend. Based on the user's role (received after login), it directs them to the appropriate dashboard.
2.  **Backend (Node.js/Express)**: A Node.js server (`server/main.js`) that:
    *   Receives CV generation requests, calls the Google Gemini API with the necessary API key, and returns the result.
    *   Receives authentication requests (email/password and Google ID tokens), processes them against a MySQL database (which includes user roles), and returns user data (including role)/mock tokens. Passwords are hashed using `bcrypt`. Google ID tokens are verified using `google-auth-library`.
    *   Assigns an 'admin' role to users logging in/signing up with a predefined `ADMIN_EMAIL`.

This approach ensures API keys and sensitive authentication logic are managed securely on the server-side.

## Running the Application

You need to run both the backend server and the frontend development server.

### 1. Backend Server Setup & Run

1.  **Navigate to the project root directory.**
2.  **Install backend dependencies:**
    ```bash
    npm install
    ```
3.  **Set up MySQL Database:** (Instructions remain the same)
4.  **Google Cloud Console Setup for OAuth 2.0:** (Instructions remain the same)
5.  **Create an environment file:**
    Create a file named `.env` (or `.env.local` for local development) in the project root.
6.  **Add your API Key, Database Credentials, Google Client ID, and Admin Email to `.env`:**
    ```dotenv
    # Gemini API Key
    API_KEY=YOUR_ACTUAL_GEMINI_API_KEY

    # Google OAuth Client ID (for both frontend and backend verification)
    VITE_GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID 
    GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID 

    # Admin Email (for assigning admin role on login/signup)
    ADMIN_EMAIL=admin@aicvmaker.com 

    # MySQL Database Configuration
    DB_HOST=localhost
    DB_USER=root
    DB_PASSWORD=password 
    DB_NAME=aicvmakeroauth
    DB_PORT=3306 
    ```
    Replace placeholders with your actual values. The `ADMIN_EMAIL` will be used by the backend to automatically assign the 'admin' role.

7.  **Start the backend server:**
    ```bash
    node server/main.js
    ```

### 2. Frontend Setup & Run

(Instructions remain the same)

## API Key Management

(Instructions remain the same, noting `GOOGLE_CLIENT_ID` usage)

## Authentication & User Roles

*   **Email/Password & Sign in with Google** as described before.
*   **User Roles**:
    *   The backend assigns a `role` ('user' or 'admin') to each user.
    *   Users logging in with the email specified in `ADMIN_EMAIL` (in `.env`) are given the 'admin' role.
    *   The frontend uses this role to direct users to either a **User Dashboard** or an **Admin Dashboard**.

## Database Schema (MySQL)

The `users` table includes a `role` column:

```sql
CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255), 
  name VARCHAR(255),
  google_id VARCHAR(255) UNIQUE, 
  role VARCHAR(50) DEFAULT 'user', -- Stores user role ('user' or 'admin')
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## Update Instructions & Changelog

### Admin & User Dashboards with Roles
*   **`App.tsx` (Updated):** `User` interface now includes `role`. Dashboard route conditionally renders `AdminDashboardPage` or `UserDashboardPage` based on `currentUser.role`.
*   **`server/main.js` (Updated):**
    *   Database schema initialization adds `role` column to `users` table.
    *   Auth logic (signup, Google Sign-In, login) assigns `'admin'` role if email matches `ADMIN_EMAIL` from `.env`, otherwise `'user'`.
    *   User's `role` is returned in auth API responses.
*   **`pages/DashboardPage.tsx` (Renamed):** Renamed to `pages/UserDashboardPage.tsx`.
*   **`pages/AdminDashboardPage.tsx` (New):** Created for admin-specific views and actions (placeholders).
*   **`README.md` (Updated):** Documented role system, `ADMIN_EMAIL` environment variable, and separate dashboards.

### Previously: Google OAuth Integration & LinkedIn Removal
(Previous changelog entries remain)
