```bash
App.tsx



import React, { useState, useCallback, useEffect } from 'react';
import { HashRouter, Routes, Route, Outlet, Navigate } from 'react-router-dom';
import Navbar from './components/Navbar';
import HeroSection from './components/HeroSection';
import Footer from './components/Footer';
import AuthModal from './components/AuthModal';
import UserDashboardPage from './pages/UserDashboardPage';
import AdminDashboardPage from './pages/AdminDashboardPage';
import ProtectedRoute from './components/ProtectedRoute';
import AboutUsPage from './pages/AboutUsPage';
import ContactUsPage from './pages/ContactUsPage';
import PrivacyPolicyPage from './pages/PrivacyPolicyPage';
import TermsOfServicePage from './pages/TermsOfServicePage';
import DataSharingGdprPage from './pages/DataSharingGdprPage';
import VerifyEmailPage from './pages/VerifyEmailPage';
import RequestVerificationPage from './pages/RequestVerificationPage';
import RequestPasswordResetPage from './pages/RequestPasswordResetPage';
import ResetPasswordPage from './pages/ResetPasswordPage';


export interface AddressInfo {
  street?: string;
  city?: string;
  country?: string;
  postalCode?: string;
}

export interface WorkExperience {
  id: string; 
  company?: string;
  title?: string;
  startDate?: string;
  endDate?: string;
  isPresent?: boolean;
  description?: string;
}

export interface EducationEntry {
  id: string; 
  institution?: string;
  degree?: string;
  fieldOfStudy?: string;
  startDate?: string;
  endDate?: string;
  isCurrent?: boolean;
  description?: string;
}

export interface LanguageEntry {
  id: string;
  languageName?: string;
  proficiency?: 'Basic' | 'Conversational' | 'Fluent' | 'Native' | '';
}

export interface AwardEntry {
  id: string;
  awardName?: string;
  issuer?: string;
  date?: string;
  description?: string;
}

export interface PublicationEntry {
  id: string;
  title?: string;
  journalOrPlatform?: string;
  date?: string;
  url?: string;
  description?: string;
}

export interface SeminarEntry {
  id: string;
  seminarName?: string;
  role?: 'Attendee' | 'Speaker' | 'Organizer' | '';
  date?: string;
  location?: string;
  description?: string;
}

export interface HobbyEntry {
  id: string;
  hobbyName?: string;
}

export interface User {
  id?: number | string;
  name: string;
  email?: string;
  google_id?: string;
  role?: 'admin' | 'user';
  is_email_verified?: boolean; // Added for email verification
  phoneNumber?: string;
  linkedinUrl?: string;
  headline?: string;
  address?: AddressInfo;
  dateOfBirth?: string;
  profilePhotoUrl?: string;
  skillsSummary?: string;
  workExperiences?: WorkExperience[];
  educations?: EducationEntry[];
  languages?: LanguageEntry[];
  awards?: AwardEntry[];
  publications?: PublicationEntry[];
  seminars?: SeminarEntry[];
  hobbies?: HobbyEntry[];
}

// For signup response where user is not yet logged in
export interface SignupResponse {
    message: string;
    email?: string; // Optionally return email for UI messages
}


const Layout: React.FC<{
  isLoggedIn: boolean;
  currentUser: User | null;
  onOpenAuthModal: () => void;
  onLogout: () => void;
}> = ({ isLoggedIn, currentUser, onOpenAuthModal, onLogout }) => {
  return (
    <div className="min-h-screen flex flex-col bg-gray-50">
      <Navbar
        isLoggedIn={isLoggedIn}
        currentUser={currentUser}
        onOpenAuthModal={onOpenAuthModal}
        onLogout={onLogout}
      />
      <main className="flex-grow container mx-auto px-2 sm:px-4 py-6 sm:py-8">
        <Outlet /> 
      </main>
      <Footer />
    </div>
  );
};

const App: React.FC = () => {
  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);
  const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);
  const [currentUser, setCurrentUser] = useState<User | null>(null);

  useEffect(() => {
    const storedUser = localStorage.getItem('currentUser');
    const storedIsLoggedIn = localStorage.getItem('isLoggedIn');

    if (storedUser && storedIsLoggedIn === 'true') {
      try {
        let parsedUser: User = JSON.parse(storedUser);
        if (parsedUser && typeof parsedUser === 'object' && parsedUser.id && parsedUser.name) {
          parsedUser.address = parsedUser.address || {};
          parsedUser.workExperiences = parsedUser.workExperiences || [];
          parsedUser.educations = parsedUser.educations || [];
          parsedUser.languages = parsedUser.languages || [];
          parsedUser.awards = parsedUser.awards || [];
          parsedUser.publications = parsedUser.publications || [];
          parsedUser.seminars = parsedUser.seminars || [];
          parsedUser.hobbies = parsedUser.hobbies || [];
          parsedUser.is_email_verified = parsedUser.is_email_verified || false; 
          
          setCurrentUser(parsedUser);
          setIsLoggedIn(true);
          console.log("Session restored from localStorage:", parsedUser);
        } else {
          console.warn("Invalid user data in localStorage. Clearing session.");
          localStorage.removeItem('currentUser');
          localStorage.removeItem('isLoggedIn');  
        }
      } catch (error) {
        console.error("Failed to parse stored user data:", error);
        localStorage.removeItem('currentUser');
        localStorage.removeItem('isLoggedIn');
      }
    }
  }, []);


  const openAuthModal = useCallback(() => {
    setIsAuthModalOpen(true);
  }, []);

  const closeAuthModal = useCallback(() => {
    setIsAuthModalOpen(false);
  }, []);

  const handleLoginSuccess = useCallback((userData: User) => {
    console.log("Login success with user data (including role & verification status):", userData);
    const enrichedUserData: User = {
      ...userData,
      address: userData.address || {},
      workExperiences: userData.workExperiences || [],
      educations: userData.educations || [],
      languages: userData.languages || [],
      awards: userData.awards || [],
      publications: userData.publications || [],
      seminars: userData.seminars || [],
      hobbies: userData.hobbies || [],
      is_email_verified: userData.is_email_verified || false,
    };
    setIsLoggedIn(true);
    setCurrentUser(enrichedUserData); 
    setIsAuthModalOpen(false);

    try {
      localStorage.setItem('currentUser', JSON.stringify(enrichedUserData));
      localStorage.setItem('isLoggedIn', 'true');
    } catch (error) {
      console.error("Failed to save session to localStorage:", error);
    }
  }, []);

  const handleLogout = useCallback(() => {
    setIsLoggedIn(false);
    setCurrentUser(null);
    localStorage.removeItem('currentUser');
    localStorage.removeItem('isLoggedIn');
  }, []);

  return (
    <HashRouter>
      <Routes>
        <Route 
          element={
            <Layout 
              isLoggedIn={isLoggedIn} 
              currentUser={currentUser} 
              onOpenAuthModal={openAuthModal}
              onLogout={handleLogout} 
            />
          }
        >
          <Route path="/" element={<HeroSection />} />
          <Route 
            path="/dashboard" 
            element={
              <ProtectedRoute isLoggedIn={isLoggedIn}>
                {currentUser?.role === 'admin' ? (
                  <AdminDashboardPage currentUser={currentUser} />
                ) : (
                  <UserDashboardPage currentUser={currentUser} />
                )}
              </ProtectedRoute>
            } 
          />
          <Route path="/about-us" element={<AboutUsPage />} />
          <Route path="/contact-us" element={<ContactUsPage />} />
          <Route path="/privacy-policy" element={<PrivacyPolicyPage />} />
          <Route path="/terms-of-service" element={<TermsOfServicePage />} />
          <Route path="/gdpr-consent" element={<DataSharingGdprPage />} />
          <Route path="/verify-email" element={<VerifyEmailPage />} />
          <Route path="/request-verification" element={<RequestVerificationPage />} />
          <Route path="/request-password-reset" element={<RequestPasswordResetPage />} />
          <Route path="/reset-password" element={<ResetPasswordPage />} />
          <Route path="*" element={<Navigate to="/" replace />} />
        </Route>
      </Routes>
      {isAuthModalOpen && (
        <AuthModal
          isOpen={isAuthModalOpen}
          onClose={closeAuthModal}
          onAuthSuccess={handleLoginSuccess}
        />
      )}
    </HashRouter>
  );
};

export default App;

```

```bash
GAsetup.md



# Google Analytics Setup Guide (GAsetup.md)

## Complete Setup Instructions for Live Traffic Display on Admin Dashboard

This guide will help you set up Google Analytics to display live traffic data on your AI CV Maker admin dashboard.

### Prerequisites
- Google Analytics 4 (GA4) property already created
- Admin access to Google Analytics
- Google Cloud Console access
- Admin user account in the application

### Step 1: Set Up Google Analytics Tracking

1. **Get your Measurement ID**
   - Go to Google Analytics
   - Navigate to Admin (gear icon) → Data Streams
   - Click on your web stream
   - Copy your Measurement ID (format: `G-XXXXXXXXXX`) (For this app, it's `G-V3TDTYCSVR`)

2. **Add tracking code to your website**
   - The gtag.js script should already be in your `index.html`
   - Verify it matches your Measurement ID (`G-V3TDTYCSVR`).

### Step 2: Enable Google Analytics Data API

1. **Go to Google Cloud Console**
   - Visit: https://console.cloud.google.com/
   - Select your project from the dropdown (create one if you don't have one).

2. **Enable the API**
   - Go to "APIs & Services" → "Library"
   - Search for "Google Analytics Data API"
   - Click on it and press "ENABLE"
   - Wait 1-2 minutes for activation.

### Step 3: Create Service Account

1. **Navigate to Service Accounts**
   - In Google Cloud Console, go to "IAM & Admin" → "Service Accounts"
   - Click "+ CREATE SERVICE ACCOUNT"

2. **Configure Service Account**
   - Service account name: `ai-cv-analytics-reader` (or your preferred name)
   - Service account ID: Will be auto-generated (e.g., `ai-cv-analytics-reader@your-project-id`)
   - Description: "Reads Google Analytics data for admin dashboard"
   - Click "CREATE AND CONTINUE"
   - **Grant this service account access to project** (Role): For reading Analytics data, a common role to assign at the project level is "Service Account User" if the service account itself needs to act as a user for other services, but primarily, the access to GA data is granted within GA itself (Step 4.3). You can often skip assigning a project-level role here if the only purpose is GA data access via direct GA permissions.
   - Click "CONTINUE".
   - **Grant users access to this service account** (Optional): Skip this step.
   - Click "DONE".

3. **Create JSON Key**
   - Find your new service account in the list (e.g., `ai-cv-analytics-reader@your-project-id.iam.gserviceaccount.com`).
   - Click on the service account email.
   - Go to the "KEYS" tab.
   - Click "ADD KEY" → "Create new key".
   - Select "JSON" as the key type.
   - Click "CREATE". A JSON file will be downloaded automatically.

4. **Save the Key File**
   - Move the downloaded JSON file to a secure location in your project. A common practice is to place it in the root directory or a dedicated `config` directory. For this project, let's assume it's placed in the project root.
   - You can rename it for simplicity, e.g., `service-account-key.json` or `ga-credentials.json`.
   - **IMPORTANT**: Add this JSON key file to your `.gitignore` file to prevent it from being committed to version control. E.g., add `service-account-key.json` to `.gitignore`.

### Step 4: Get Required IDs and Configure Access

1. **Find your GA4 Property ID**
   - Go to your Google Analytics 4 Property.
   - Click Admin (gear icon in the bottom left).
   - In the "Property" column, click "Property Details".
   - Copy the "Property ID" (it's a numeric ID, e.g., `123456789`).

2. **Get Service Account Email**
   - This is the email address of the service account you created in Step 3.2 (e.g., `ai-cv-analytics-reader@your-project-id.iam.gserviceaccount.com`). You can also find this in the downloaded JSON key file under the `"client_email"` field.

3. **Grant Analytics Access to Service Account**
   - In Google Analytics Admin dashboard:
   - Under the "Property" column (ensure the correct GA4 property is selected), click "Property Access Management".
   - Click the blue "+" button in the top right and select "Add users".
   - In the "Email addresses" field, paste the service account email from Step 4.2.
   - Uncheck "Notify new users by email".
   - Under "Direct roles and data restrictions", select the **"Viewer"** role. This is sufficient for reading data.
   - Click "Add" in the top right.

### Step 5: Configure Environment Variables

Create or update your `.env` file in the project root. A full example can be found in the main `README.md` file. Key variables include:

```env
# AI Service API Key
API_KEY=YOUR_ACTUAL_AI_SERVICE_API_KEY

# Google OAuth Client ID (for user Google Sign-In)
VITE_GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID 
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID 

# Admin Email
ADMIN_EMAIL=admin@example.com 

# MySQL Database Configuration
DB_HOST=localhost
DB_USER=your_db_user
# ... other DB variables

# Google Analytics Data API Configuration
GOOGLE_APPLICATION_CREDENTIALS=./service-account-key.json 
GA_PROPERTY_ID=YOUR_GA4_PROPERTY_ID 

# Email (Nodemailer SMTP) Configuration
SMTP_HOST=smtp.example.com
SMTP_PORT=587 
SMTP_SECURE=false 
SMTP_USER=your_smtp_username
SMTP_PASS=your_smtp_password
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME="AI CV Maker"

# Frontend Base URL (for generating links in emails)
FRONTEND_BASE_URL=http://localhost:5173 # Or your production frontend URL
```
- Replace placeholders with your actual values.
- Ensure `GOOGLE_APPLICATION_CREDENTIALS` path matches your service account JSON key file.

### Step 6: Install Dependencies

Ensure the required libraries are installed (they should be in `package.json`):
```bash
npm install @google-analytics/data nodemailer
# or
yarn add @google-analytics/data nodemailer
```

### Step 7: Test the Setup
(As detailed in the main README.md)

### Troubleshooting
(As detailed in the main README.md)

### Security Notes
(As detailed in the main README.md)

```

```bash
README.md



# AI CV Maker Application
#Never ever change the gemini model gemini-1.5-flash-latest anywhere, it should always be gemini-1.5-flash-latest.

after every update/change add changelog to the readme.md

while copying project skip enclose.py and package-lock.json and other similar unnecessary files.

This project is a modern landing page for an AI-powered CV Maker. Users can input a job title or description to get a tailored CV outline generated by AI. It features distinct dashboards for regular users and administrators, with real-time analytics insights for admins, comprehensive informational pages, email verification for user signups, and a secure password reset flow.

## Key Features

*   AI-powered CV outline generation via a backend service.
*   Responsive design with Tailwind CSS.
*   Interactive UI built with React.
*   **User Authentication with Roles, Email Verification & Password Reset**:
    *   Login/Sign Up with Email/Password.
        *   **Email Verification**: New users signing up with email/password receive a verification email. They must click the link in the email to verify their account before they can log in.
        *   Option to resend verification email.
        *   **Forgot Password**: Users can request a password reset link to their verified email address.
    *   **Sign in with Google (OAuth 2.0)**.
    *   Authentication requests are handled by the backend.
    *   Users can have 'user' or 'admin' roles, providing access to different dashboards.
    *   Login state persists across page refreshes using `localStorage`.
*   **Comprehensive User Profile**: Users can input detailed information including personal details, address, work experience, education, skills summary, languages, awards, publications, seminars/conferences, and hobbies.
*   Node.js/Express backend (`server/main.js`) to handle API calls securely.
*   Separate **User Dashboard** and **Admin Dashboard**.
*   **Google Analytics Integration**: 
    *   Tracks page views using `gtag.js`.
    *   Admin dashboard displays live "Current Active Users" and "Top Active Pages" fetched via Google Analytics Data API.
    *   Provides a direct link to the full Google Analytics dashboard.
*   **Static Informational Pages**: Includes About Us, Contact Us, Privacy Policy, Terms of Service, and Data Sharing & GDPR Consent pages, with policies updated for ad network compliance readiness.

## Architecture Overview
(The architecture overview remains largely the same but now implicitly includes password reset logic in the backend auth handling)
The application exclusively uses a **frontend-backend architecture**:

1.  **Frontend (React + Vite)**: The user interface built with React and served by Vite. It captures user input for CV generation and detailed user profile information. For Google Sign-In, it uses Google Identity Services (GIS) to obtain an ID token, which is then sent to the backend. Based on the user's role (received after login), it directs them to the appropriate dashboard. Includes Google Analytics (gtag.js) for basic site tracking. The admin dashboard fetches and displays real-time analytics data from the backend. User login state is persisted in `localStorage`. Provides several static informational pages for users and handles the email verification and password reset flows (receiving tokens, showing messages).
2.  **Backend (Node.js/Express)**: A Node.js server (`server/main.js`) that:
    *   Receives CV generation requests, calls a third-party AI API (using the `@google/genai` SDK with the `gemini-1.5-flash-latest` model) with the necessary API key, and returns the result.
    *   Receives authentication requests (email/password and Google ID tokens), processes them against a MySQL database (which includes user roles, email verification status, and password reset tokens), and returns user data (including role)/mock tokens.
    *   Handles email verification: generates tokens, sends verification emails using `nodemailer` via SMTP, and verifies tokens.
    *   Handles password reset: generates tokens, sends password reset emails, verifies reset tokens, and updates passwords.
    *   Assigns an 'admin' role to users logging in/signing up with a predefined `ADMIN_EMAIL`.
    *   **Fetches real-time Google Analytics data** using the `@google-analytics/data` library and a service account, providing this data to the admin dashboard.

This approach ensures API keys, sensitive authentication logic, Google Cloud service account credentials, and SMTP credentials are managed securely on the server-side.

## Running the Application
(Instructions remain the same, ensure environment variables are set as per the example)

### 1. Backend Server Setup & Run
(Refer to `GAsetup.md` and the `.env` example below for environment variable details regarding service accounts, API keys, DB, and SMTP configuration.)

1.  **Navigate to the project root directory.**
2.  **Install backend dependencies:**
    ```bash
    npm install
    ```
3.  **Set up MySQL Database:** (As per previous instructions and schema below).
4.  **Google Cloud Console Setup for OAuth 2.0 & Analytics Data API:** (As per `GAsetup.md`).
5.  **Configure `.env` file:** See the "Final `.env` Example Snapshot" section below.
6.  **Start the backend server:**
    ```bash
    node server/main.js
    ```

### 2. Frontend Setup & Run
(Instructions remain the same)

## API Key & Credentials Management
(Instructions remain the same, refer to `.env` example)

## Authentication & User Roles
*   **Email/Password & Sign in with Google** as described.
*   **Email Verification**: Users signing up with email/password must verify their email address via a link sent to them before they can log in.
*   **Password Reset**: Users can request a password reset link to their verified email.
*   **User Roles**: Admin role assigned based on `ADMIN_EMAIL`.
*   **Session Persistence**: User login state is persisted in `localStorage`.

## Google Analytics
(Description remains the same)

## Database Schema (MySQL)

The `users` table needs to be updated for email verification and password reset:

```sql
CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255), 
  name VARCHAR(255),
  google_id VARCHAR(255) UNIQUE, 
  role VARCHAR(50) DEFAULT 'user',
  is_email_verified BOOLEAN DEFAULT FALSE,
  email_verification_token VARCHAR(255) NULLABLE, -- Stores a HASH of the token
  email_verification_token_expires_at TIMESTAMP NULLABLE,
  password_reset_token VARCHAR(255) NULLABLE, -- Stores a HASH of the token
  password_reset_token_expires_at TIMESTAMP NULLABLE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```
*Note: `email_verification_token` and `password_reset_token` should store a hashed version of the token sent to the user for security.*

## Final `.env` Example Snapshot

Create a `.env` file in the project root with the following content, replacing placeholder values with your actual credentials and settings:

```dotenv
# AI Service API Key (e.g., for Google Gemini or other AI provider)
API_KEY=YOUR_ACTUAL_AI_SERVICE_API_KEY

# Google OAuth Client ID (for user Google Sign-In for web)
VITE_GOOGLE_CLIENT_ID=YOUR_GOOGLE_WEB_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_ID=YOUR_GOOGLE_WEB_CLIENT_ID.apps.googleusercontent.com

# Admin Email (for assigning admin role on login/signup)
ADMIN_EMAIL=admin@example.com 

# MySQL Database Configuration
DB_HOST=localhost
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=aicvmakeroauth
DB_PORT=3306

# Google Analytics Data API Configuration
# Path to your downloaded service account JSON key file (relative to project root)
GOOGLE_APPLICATION_CREDENTIALS=./service-account-key.json 
# Your Google Analytics 4 Property ID (the numeric ID)
GA_PROPERTY_ID=YOUR_GA4_PROPERTY_ID 

# Email (Nodemailer SMTP) Configuration
SMTP_HOST=smtp.example.com
SMTP_PORT=587 # Or 465 for SSL
SMTP_SECURE=false # true for port 465, false for 587 (STARTTLS)
SMTP_USER=your_smtp_username_or_email
SMTP_PASS=your_smtp_password_or_app_password
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=AI CV Maker

# Frontend Base URL (for generating links in emails)
FRONTEND_BASE_URL=http://localhost:5173 # Or your production frontend URL
```

## Update Instructions & Changelog

### Forgot Password / Password Reset Flow
*   **`server/main.js` (Updated):**
    *   Updated `users` table schema initialization to include `password_reset_token` and `password_reset_token_expires_at`.
    *   Added `/api/auth/request-password-reset` endpoint: if user exists and email is verified, generates a token, stores its hash, and sends a password reset email.
    *   Added `/api/auth/reset-password` endpoint: validates the provided token (by hashing it and comparing to DB), checks expiry, and if valid, updates the user's password and clears the token.
*   **`App.tsx` (Updated):** Added routes for `/request-password-reset` and `/reset-password`.
*   **`components/AuthModal.tsx` (Updated):** Added a "Forgot Password?" link to the login form.
*   **`services/authService.ts` (Updated):** Added `requestPasswordReset` and `resetPassword` functions.
*   **`pages/RequestPasswordResetPage.tsx` (New):** Page for users to request a password reset link via email.
*   **`pages/ResetPasswordPage.tsx` (New):** Page for users to enter a new password using the token received in the email.
*   **`README.md` (Updated):** Documented the password reset feature and updated the database schema.

### Email Verification for Email/Password Signup
(Previous changelog entries remain)

(Previous changelog entries remain)

```

```bash
components\AuthModal.tsx


/// <reference types="vite/client" />
import React, { useState, FormEvent, useEffect, useRef } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import type { User, SignupResponse } from '../App';
import { GoogleIcon, CloseIcon } from '../constants'; 
import { 
  signupWithEmailPassword, 
  loginWithEmailPassword,
  signInWithGoogleIdToken 
} from '../services/authService';

declare global {
  interface Window {
    google: any;
  }
}

interface AuthModalProps {
  isOpen: boolean;
  onClose: () => void;
  onAuthSuccess: (user: User) => void;
}

const AuthModal: React.FC<AuthModalProps> = ({ isOpen, onClose, onAuthSuccess }) => {
  const [authMode, setAuthMode] = useState<'login' | 'signup'>('login');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [name, setName] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [successMessage, setSuccessMessage] = useState<string | null>(null); 
  const [showResendVerificationLink, setShowResendVerificationLink] = useState(false);
  const [emailForResend, setEmailForResend] = useState('');

  const googleButtonDivRef = useRef<HTMLDivElement>(null);
  const navigate = useNavigate();

  const VITE_GOOGLE_CLIENT_ID = import.meta.env.VITE_GOOGLE_CLIENT_ID;

  const handleGoogleSignInResponse = async (response: any) => {
    setError(null);
    setSuccessMessage(null);
    setIsLoading(true);
    try {
      const idToken = response.credential;
      if (!idToken) throw new Error("Google Sign-In did not return a credential.");
      const userData = await signInWithGoogleIdToken(idToken);
      if (userData) {
        onAuthSuccess(userData);
        resetFormFields();
        onClose(); 
      }
    } catch (err) { // @ts-ignore
      setError(err.message || 'An unknown error occurred during Google Sign-In.');
      console.error("Google Sign-In frontend error:", err);
    } finally {
      setIsLoading(false);
    }
  };

  useEffect(() => {
    if (isOpen) {
        setError(null);
        setSuccessMessage(null);
        setShowResendVerificationLink(false);
    }
    if (isOpen && VITE_GOOGLE_CLIENT_ID && googleButtonDivRef.current) {
      if (typeof window.google !== 'undefined' && window.google.accounts && window.google.accounts.id) {
        try {
          window.google.accounts.id.initialize({ client_id: VITE_GOOGLE_CLIENT_ID, callback: handleGoogleSignInResponse, ux_mode: 'popup' });
          while (googleButtonDivRef.current.firstChild) googleButtonDivRef.current.removeChild(googleButtonDivRef.current.firstChild);
          window.google.accounts.id.renderButton(googleButtonDivRef.current, { theme: 'outline', size: 'large', text: authMode === 'login' ? 'signin_with' : 'signup_with' });
        } catch (e) { console.error("Error initializing Google Sign-In:", e); setError("Could not initialize Google Sign-In."); }
      } else { console.warn("Google Sign-In library not available yet."); }
    } else if (isOpen && !VITE_GOOGLE_CLIENT_ID) { setError("Google Client ID not configured."); }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isOpen, authMode, VITE_GOOGLE_CLIENT_ID]);

  const resetFormFields = () => { setEmail(''); setPassword(''); setConfirmPassword(''); setName(''); };

  const handleEmailPasswordAuth = async () => {
    setError(null);
    setSuccessMessage(null);
    setIsLoading(true);
    setShowResendVerificationLink(false);

    try {
      if (!email.includes('@')) throw new Error("Please enter a valid email.");
      if (password.length < 6) throw new Error("Password must be at least 6 characters.");

      if (authMode === 'signup') {
        if (password !== confirmPassword) throw new Error("Passwords don't match.");
        if (!name.trim()) throw new Error("Please enter your name for signup.");
        
        const response: SignupResponse = await signupWithEmailPassword(email, password, name);
        setSuccessMessage(`${response.message} An email has been sent to ${email}.`);
        resetFormFields(); 
      } else { // Login
        const userData = await loginWithEmailPassword(email, password);
        onAuthSuccess(userData);
        resetFormFields();
        onClose(); 
      }
    } catch (err) { // @ts-ignore
      const errorMessage = err.message || 'An unknown error occurred.';
      setError(errorMessage);
      // @ts-ignore
      if (err.needsVerification && err.emailForResend) {
        setShowResendVerificationLink(true); // @ts-ignore
        setEmailForResend(err.emailForResend);
      }
    } finally {
      setIsLoading(false);
    }
  };

  const handleSubmit = (e: FormEvent) => { e.preventDefault(); handleEmailPasswordAuth(); };

  const handleResendClick = () => {
    onClose(); 
    navigate('/request-verification', { state: { email: emailForResend } }); 
  };

  const handleForgotPasswordClick = () => {
    onClose();
    navigate('/request-password-reset');
  };

  const inputClass = "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors placeholder-gray-400 text-sm";
  const buttonClass = "w-full flex items-center justify-center px-4 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2";

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]" onClick={onClose} role="dialog" aria-modal="true">
      <div className="bg-white rounded-lg shadow-xl p-6 sm:p-8 w-full max-w-md relative" onClick={(e) => e.stopPropagation()}>
        <button onClick={onClose} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors" aria-label="Close modal"><CloseIcon className="w-6 h-6" /></button>
        <h2 className="text-2xl font-semibold text-gray-800 text-center mb-6">{authMode === 'login' ? 'Welcome Back!' : 'Create Your Account'}</h2>

        {error && (
          <div className="mb-4 p-3 bg-red-50 text-red-700 border border-red-300 rounded-md text-sm break-words">
            {error}
            {showResendVerificationLink && (
              <button onClick={handleResendClick} className="ml-2 text-blue-600 hover:underline font-semibold">
                Resend verification email?
              </button>
            )}
          </div>
        )}
        {successMessage && (
          <div className="mb-4 p-3 bg-green-50 text-green-700 border border-green-300 rounded-md text-sm break-words">
            {successMessage}
          </div>
        )}

        {!successMessage && ( 
          <>
            <form onSubmit={handleSubmit} className="space-y-4">
              {authMode === 'signup' && (
                <div><label htmlFor="name" className="block text-sm font-medium text-gray-700 sr-only">Name</label><input type="text" id="name" value={name} onChange={(e) => setName(e.target.value)} placeholder="Full Name" className={inputClass} required disabled={isLoading} autoComplete="name"/></div>
              )}
              <div><label htmlFor="email" className="block text-sm font-medium text-gray-700 sr-only">Email</label><input type="email" id="email" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="Email address" className={inputClass} required disabled={isLoading} autoComplete={authMode === 'signup' ? 'new-email' : 'email'}/></div>
              <div><label htmlFor="password" className="block text-sm font-medium text-gray-700 sr-only">Password</label><input type="password" id="password" value={password} onChange={(e) => setPassword(e.target.value)} placeholder="Password" className={inputClass} required disabled={isLoading} autoComplete={authMode === 'signup' ? 'new-password' : 'current-password'}/></div>
              {authMode === 'signup' && (
                <div><label htmlFor="confirmPassword" className="block text-sm font-medium text-gray-700 sr-only">Confirm Password</label><input type="password" id="confirmPassword" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} placeholder="Confirm Password" className={inputClass} required disabled={isLoading} autoComplete="new-password"/></div>
              )}
              <button type="submit" className={`${buttonClass} bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 disabled:bg-gray-300`} disabled={isLoading}>
                {isLoading && authMode === 'login' ? 'Logging in...' : isLoading && authMode === 'signup' ? 'Signing up...' : authMode === 'login' ? 'Login' : 'Sign Up'}
              </button>
            </form>

             {authMode === 'login' && (
                <div className="mt-3 text-right">
                    <button
                        onClick={handleForgotPasswordClick}
                        className="text-xs text-blue-600 hover:text-blue-700 hover:underline focus:outline-none"
                    >
                        Forgot Password?
                    </button>
                </div>
            )}


            <div className="my-6 flex items-center">
              <div className="flex-grow border-t border-gray-300"></div><span className="flex-shrink mx-4 text-gray-500 text-sm">Or</span><div className="flex-grow border-t border-gray-300"></div>
            </div>
            <div className="space-y-3">
              <div ref={googleButtonDivRef} className="flex justify-center [&>iframe]:!w-full [&>div]:!w-full"></div>
              {VITE_GOOGLE_CLIENT_ID && isOpen && !googleButtonDivRef.current?.hasChildNodes() && !isLoading && (<p className="text-xs text-center text-gray-500">Loading Google Sign-In...</p>)}
              {!VITE_GOOGLE_CLIENT_ID && isOpen && (<p className="text-xs text-center text-red-500">Google Sign-In is currently unavailable (client ID missing).</p>)}
            </div>
          </>
        )}

        <div className="mt-6 text-center">
          <button
            onClick={() => { 
              setAuthMode(authMode === 'login' ? 'signup' : 'login'); 
              setError(null); 
              setSuccessMessage(null);
              setShowResendVerificationLink(false);
            }}
            className="text-sm text-blue-600 hover:text-blue-700 hover:underline focus:outline-none"
          >
            {successMessage ? (authMode === 'signup' ? 'Proceed to Login?' : 'Back to form') : (authMode === 'login' ? "Don't have an account? Sign Up" : 'Already have an account? Login')}
          </button>
        </div>
      </div>
    </div>
  );
};

export default AuthModal;

```

```bash
components\Footer.tsx



import React from 'react';
import { Link } from 'react-router-dom';

const Footer: React.FC = () => {
  return (
    <footer className="bg-white text-center py-6 border-t border-gray-200">
      <div className="container mx-auto px-4 sm:px-6 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
        <p className="text-gray-600 text-sm"> 
          &copy; {new Date().getFullYear()} AI CV Maker. All rights reserved.
        </p>
        <div className="flex flex-wrap justify-center sm:justify-end space-x-4">
          <Link 
            to="/terms-of-service" 
            className="text-gray-600 hover:text-blue-600 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-sm"
          >
            Terms of Service
          </Link>
          <span className="text-gray-400 text-sm hidden sm:inline">|</span>
          <Link 
            to="/privacy-policy" 
            className="text-gray-600 hover:text-blue-600 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-sm"
          >
            Privacy Policy
          </Link>
          <span className="text-gray-400 text-sm hidden sm:inline">|</span>
          <Link 
            to="/gdpr-consent" 
            className="text-gray-600 hover:text-blue-600 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-sm"
          >
            Data & GDPR
          </Link>
        </div>
      </div>
    </footer>
  );
};

export default Footer;

```

```bash
components\HeroSection.tsx



import React, { useState, useCallback, useEffect } from 'react';
// Now only generateCVContent (backend call) will be used by default.
// generateCVContentDirect is still in geminiService.ts but not used here.
import { generateCVContent } from '../services/geminiService'; 
import { LoadingSpinner } from '../constants';

const HeroSection: React.FC = () => {
  const [jobInfo, setJobInfo] = useState<string>('');
  const [cvResult, setCvResult] = useState<string>('');
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const [error, setError] = useState<string | null>(null);
  const [showError, setShowError] = useState<boolean>(false);
  const [showResult, setShowResult] = useState<boolean>(false);

  useEffect(() => {
    if (error) {
      setShowError(true);
    } else {
      setShowError(false);
    }
  }, [error]);

  useEffect(() => {
    if (cvResult) {
      setShowResult(true);
    } else {
      setShowResult(false);
    }
  }, [cvResult]);


  const handleCreateCV = useCallback(async () => {
    if (!jobInfo.trim()) {
      setError('Please enter a job title or description.');
      setCvResult('');
      setShowResult(false);
      return;
    }
    setIsLoading(true);
    setError(null);
    setCvResult('');
    setShowResult(false);
    try {
      // Exclusively use the backend service call.
      const result = await generateCVContent(jobInfo); 
      setCvResult(result);
    } catch (err) {
      if (err instanceof Error) {
        // Error message now comes from the service (backend via fetch)
        setError(err.message); 
      } else {
        setError('An unknown error occurred while trying to generate the CV.');
      }
      console.error(err);
    } finally {
      setIsLoading(false);
    }
  }, [jobInfo]);

  const dismissError = () => {
    setError(null);
  };

  return (
    <div className="text-center py-8 sm:py-12 md:py-16"> {/* Adjusted padding for responsiveness */}
      <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-800 mb-4 leading-tight">
        Craft Your Perfect CV with AI Precision
      </h1>
      <p className="text-md sm:text-lg text-gray-600 mb-8 sm:mb-10 max-w-xl sm:max-w-2xl mx-auto px-2"> {/* Responsive text size and padding */}
        Enter a job title or description, and let our AI build a tailored resume outline in minutes.
      </p>

      <div className="max-w-lg sm:max-w-xl mx-auto bg-white p-4 sm:p-6 md:p-8 rounded-lg shadow-md"> {/* Responsive padding and max-width */}
        <textarea
          value={jobInfo}
          onChange={(e) => setJobInfo(e.target.value)}
          placeholder="Paste job description or enter job title here (e.g., 'Software Engineer at Google'...)"
          className="w-full h-36 sm:h-40 p-3 bg-white text-gray-800 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors placeholder-gray-500 resize-none text-sm sm:text-base" // Responsive text size
          disabled={isLoading}
          aria-label="Job title or description input"
        />
        <button
          onClick={handleCreateCV}
          disabled={isLoading || !jobInfo.trim()}
          className="mt-4 sm:mt-6 w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-200 disabled:text-gray-500 text-white font-medium py-2.5 sm:py-3 px-4 sm:px-6 rounded text-base sm:text-lg flex items-center justify-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" // Responsive padding and text
          aria-live="polite"
        >
          {isLoading ? (
            <>
              {LoadingSpinner}
              Generating...
            </>
          ) : (
            'Create My AI CV'
          )}
        </button>
      </div>

      {showError && error && (
        <div 
          className={`mt-6 sm:mt-8 max-w-lg sm:max-w-xl mx-auto bg-red-50 border border-red-300 text-red-700 px-4 py-3 rounded-md relative transition-opacity duration-300 ease-in-out ${showError ? 'opacity-100' : 'opacity-0'}`} 
          role="alert"
        >
          <strong className="font-bold">Oops! </strong>
          <span className="block sm:inline">{error}</span>
          <button
            onClick={dismissError}
            className="absolute top-0 bottom-0 right-0 px-4 py-3 text-red-500 hover:text-red-700 focus:outline-none transition-colors"
            aria-label="Dismiss error"
          >
            <svg className="fill-current h-6 w-6" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
          </button>
        </div>
      )}

      {showResult && cvResult && (
        <div className={`mt-8 sm:mt-10 max-w-xl sm:max-w-2xl md:max-w-3xl mx-auto text-left transition-opacity duration-500 ease-in-out ${showResult ? 'opacity-100' : 'opacity-0'}`}>
          <h2 className="text-xl sm:text-2xl font-semibold text-gray-800 mb-3 sm:mb-4 px-2 sm:px-0">Generated CV Outline:</h2>
          <div className="bg-white p-4 sm:p-6 rounded-lg shadow-md">
            <pre className="whitespace-pre-wrap break-words text-gray-700 text-xs sm:text-sm leading-relaxed"> {/* Responsive text size */}
              {cvResult}
            </pre>
          </div>
        </div>
      )}
    </div>
  );
};

export default HeroSection;

```

```bash
components\Navbar.tsx



import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import type { User } from '../App';

interface NavbarProps {
  isLoggedIn: boolean;
  currentUser: User | null;
  onOpenAuthModal: () => void;
  onLogout: () => void;
}

const Navbar: React.FC<NavbarProps> = ({ isLoggedIn, currentUser, onOpenAuthModal, onLogout }) => {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const navigate = useNavigate();

  const navLinks = [
    { name: 'About Us', path: '/about-us' },
    { name: 'Contact Us', path: '/contact-us' },
  ];

  const handleLogoutClick = () => {
    onLogout();
    setIsMobileMenuOpen(false);
    navigate('/'); 
  };
  
  const handleMobileAuthModalOpen = () => {
    onOpenAuthModal();
    setIsMobileMenuOpen(false);
  };

  const handleNavLinkClick = () => {
    setIsMobileMenuOpen(false);
  };

  return (
    <nav className="bg-white shadow-md border-b border-gray-200 sticky top-0 z-50">
      <div className="container mx-auto px-4 sm:px-6 py-3">
        <div className="flex justify-between items-center">
          <Link to="/" className="text-xl font-medium text-gray-800 hover:text-blue-600 transition-colors">
            AI CV Maker
          </Link>
          {/* Desktop Menu */}
          <div className="hidden md:flex space-x-2 sm:space-x-4 items-center">
            {navLinks.map((item) => (
              <Link
                key={item.name}
                to={item.path} 
                className="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
              >
                {item.name}
              </Link>
            ))}
            {isLoggedIn && currentUser && (
                 <Link
                    to="/dashboard"
                    className="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                  >
                    Dashboard
                  </Link>
            )}
            {isLoggedIn ? (
              <>
                <span className="text-gray-700 text-sm font-medium px-3 py-2">
                  Hi, {currentUser?.name?.split(' ')[0] || 'User'}
                </span>
                <button
                  onClick={handleLogoutClick}
                  className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm font-medium transition-colors shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
                >
                  Logout
                </button>
              </>
            ) : (
              <button
                onClick={onOpenAuthModal}
                className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm font-medium transition-colors shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
              >
                Login/Sign Up
              </button>
            )}
          </div>
          {/* Mobile Menu Button */}
          <div className="md:hidden flex items-center">
            <button
              onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
              type="button"
              className="inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors"
              aria-controls="mobile-menu"
              aria-expanded={isMobileMenuOpen}
              aria-label="Toggle mobile menu"
            >
              <span className="sr-only">Open main menu</span>
              {isMobileMenuOpen ? (
                <svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              ) : (
                <svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
              )}
            </button>
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      {isMobileMenuOpen && (
        <div className="md:hidden" id="mobile-menu">
          <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            {navLinks.map((item) => (
              <Link
                key={item.name}
                to={item.path}
                className="text-gray-600 hover:text-blue-600 hover:bg-gray-50 block px-3 py-2 rounded-md text-base font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                onClick={handleNavLinkClick}
              >
                {item.name}
              </Link>
            ))}
             {isLoggedIn && currentUser && (
                 <Link
                    to="/dashboard"
                    className="text-gray-600 hover:text-blue-600 hover:bg-gray-50 block px-3 py-2 rounded-md text-base font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                    onClick={handleNavLinkClick}
                  >
                    Dashboard
                  </Link>
            )}
            {isLoggedIn ? (
              <>
                 <span className="text-gray-700 block px-3 py-2 text-base font-medium">
                  Hi, {currentUser?.name?.split(' ')[0] || 'User'}
                </span>
                <button
                  onClick={handleLogoutClick}
                  className="bg-red-500 hover:bg-red-600 text-white block w-full text-left mt-1 px-3 py-2 rounded-md text-base font-medium transition-colors shadow-sm hover:shadow-md"
                >
                  Logout
                </button>
              </>
            ) : (
              <button
                onClick={handleMobileAuthModalOpen}
                className="bg-blue-600 hover:bg-blue-700 text-white block w-full text-left mt-1 px-3 py-2 rounded-md text-base font-medium transition-colors shadow-sm hover:shadow-md"
              >
                Login/Sign Up
              </button>
            )}
          </div>
        </div>
      )}
    </nav>
  );
};

export default Navbar;

```

```bash
components\ProtectedRoute.tsx



import React from 'react';
import { Navigate } from 'react-router-dom';

interface ProtectedRouteProps {
  isLoggedIn: boolean;
  children: React.ReactElement;
}

const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ isLoggedIn, children }) => {
  if (!isLoggedIn) {
    // User not logged in, redirect them to the home page.
    // Optionally, you could pass state here to show a message on the home page
    // or trigger the login modal, but for now, a simple redirect.
    return <Navigate to="/" replace />;
  }

  return children; // User is logged in, render the protected component
};

export default ProtectedRoute;

```

```bash
constants.tsx



import React from 'react'; // React import is needed for JSX

export const LoadingSpinner: React.ReactNode = (
  <svg 
    className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" // text-white is correct for a blue button
    xmlns="http://www.w3.org/2000/svg" 
    fill="none" 
    viewBox="0 0 24 24"
  >
    <circle 
      className="opacity-25" 
      cx="12" 
      cy="12" 
      r="10" 
      stroke="currentColor" 
      strokeWidth="4"
    ></circle>
    <path 
      className="opacity-75" 
      fill="currentColor" 
      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
    ></path>
  </svg>
);

export const GoogleIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 24 24" fill="currentColor" {...props}>
    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
    <path d="M1 1h22v22H1z" fill="none"/>
  </svg>
);

export const CloseIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
    <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
  </svg>
);

```

```bash
index.html



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI CV Maker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-V3TDTYCSVR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-V3TDTYCSVR');
  </script>

  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    body {
      font-family: 'Roboto', sans-serif; /* Google's standard font */
    }
    /* Custom scrollbar for Google Material light theme */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1; 
    }
    ::-webkit-scrollbar-thumb {
      background: #c1c1c1; 
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8; 
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.1.0/",
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react-router-dom": "https://esm.sh/react-router-dom@6.23.0",
    "react-router-dom/": "https://esm.sh/react-router-dom@6.23.0/",
    "@google/genai": "https://esm.sh/@google/genai@^1.6.0",
    "express": "https://esm.sh/express@^5.1.0",
    "dotenv": "https://esm.sh/dotenv@^16.5.0",
    "mysql2/": "https://esm.sh/mysql2@^3.14.1/",
    "bcrypt": "https://esm.sh/bcrypt@^6.0.0",
    "vite": "https://esm.sh/vite@^6.3.5",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^4.5.2",
    "google-auth-library": "https://esm.sh/google-auth-library@^10.1.0",
    "uuid": "https://esm.sh/uuid@^9.0.1",
    "@google-analytics/data": "https://esm.sh/@google-analytics/data@^5.1.0",
    "nodemailer": "https://esm.sh/nodemailer@^7.0.3",
    "crypto": "https://esm.sh/crypto@^1.0.1"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
```

```bash
index.tsx



import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

```

```bash
metadata.json


{
  "name": "G2",
  "description": "A modern landing page for an AI-powered CV Maker. Users can input a job title or description to get a tailored CV outline generated by AI.",
  "requestFramePermissions": [],
  "prompt": ""
}
```

```bash
package.json


{
  "name": "g2",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@google-analytics/data": "^4.4.0",
    "@google/genai": "^1.6.0",
    "bcrypt": "^6.0.0",
    "dotenv": "^16.5.0",
    "express": "^5.1.0",
    "google-auth-library": "^9.11.0",
    "mysql2": "^3.14.1",
    "nodemailer": "^6.9.14",
    "react": "^19.1.0",
    "react-dom": "^19.1.0",
    "react-router-dom": "^6.23.0",
    "uuid": "^9.0.1"
  },
  "devDependencies": {
    "@types/node": "^22.14.0",
    "@types/nodemailer": "^6.4.15",
    "@types/react": "^18.3.3",
    "@types/react-dom": "^18.3.0",
    "@types/react-router-dom": "^5.3.3",
    "@types/uuid": "^9.0.8",
    "@vitejs/plugin-react": "^4.3.1",
    "typescript": "~5.7.2",
    "vite": "^6.2.0"
  }
}
```

```bash
pages\AboutUsPage.tsx



import React from 'react';

const AboutUsPage: React.FC = () => {
  return (
    <div className="bg-white shadow-lg rounded-xl p-6 sm:p-8 lg:p-10 max-w-4xl mx-auto my-8">
      <header className="text-center mb-10">
        <h1 className="text-4xl sm:text-5xl font-bold text-gray-800 mb-4">
          About AI CV Maker
        </h1>
        <p className="text-xl text-gray-600">
          Crafting Your Future, Intelligently.
        </p>
      </header>

      <section className="mb-8">
        <h2 className="text-2xl font-semibold text-gray-700 mb-3">Our Story</h2>
        <p className="text-gray-700 leading-relaxed mb-4">
          AI CV Maker was born from a simple idea: to make professional CV creation accessible, efficient, and highly effective for everyone. We saw talented individuals struggling to translate their skills and experiences into compelling CVs that truly stood out to employers. In a fast-paced job market, we knew technology, specifically Artificial Intelligence, could bridge this gap.
        </p>
        <p className="text-gray-700 leading-relaxed">
          Our journey began with a dedicated team of HR experts, AI specialists, and UX designers passionate about empowering job seekers. We've poured countless hours into developing an intelligent platform that not only generates CVs but also provides strategic insights tailored to specific job roles and industries.
        </p>
      </section>

      <section className="mb-8">
        <h2 className="text-2xl font-semibold text-gray-700 mb-3">Our Mission</h2>
        <p className="text-gray-700 leading-relaxed">
          Our mission is to empower job seekers worldwide by providing an advanced, AI-driven tool that simplifies and enhances the CV creation process. We aim to help you articulate your professional value clearly, secure more interviews, and ultimately, land your dream job.
        </p>
      </section>

      <section className="mb-8">
        <h2 className="text-2xl font-semibold text-gray-700 mb-3">Our Vision</h2>
        <p className="text-gray-700 leading-relaxed">
          We envision a future where crafting a high-impact CV is no longer a barrier but a catalyst for career advancement. AI CV Maker strives to be the leading platform for intelligent career document creation, continuously evolving with the job market and AI technology to offer unparalleled support to professionals at every stage of their careers.
        </p>
      </section>

      <section className="mb-8">
        <h2 className="text-2xl font-semibold text-gray-700 mb-3">The AI Advantage</h2>
        <p className="text-gray-700 leading-relaxed mb-4">
          Leveraging the power of cutting-edge AI models, AI CV Maker goes beyond traditional templates. Our platform analyzes job descriptions, identifies key skills and qualifications, and suggests tailored content to ensure your CV is optimized for Applicant Tracking Systems (ATS) and human recruiters alike.
        </p>
        <ul className="list-disc list-inside text-gray-700 space-y-2 pl-4">
          <li>Tailored content suggestions based on job roles.</li>
          <li>Keyword optimization for ATS compatibility.</li>
          <li>Professional formatting and structuring.</li>
          <li>Time-saving and efficient CV building.</li>
        </ul>
      </section>

      <section>
        <h2 className="text-2xl font-semibold text-gray-700 mb-3">Why Choose Us?</h2>
        <p className="text-gray-700 leading-relaxed">
          At AI CV Maker, we are committed to your success. We combine technological innovation with a deep understanding of the recruitment landscape to provide a tool that is not only smart but also user-friendly and reliable. Join thousands of successful professionals who have transformed their job search with AI CV Maker.
        </p>
      </section>
    </div>
  );
};

export default AboutUsPage;

```

```bash
pages\AdminDashboardPage.tsx


import React, { useState, useEffect } from 'react';
import type { User } from '../App'; // Assuming User interface is in App.tsx

// Simple SVG Icons (UsersIcon, DocumentTextIcon, ClockIcon remain the same)
const UsersIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
    <path strokeLinecap="round" strokeLinejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
  </svg>
);

const DocumentTextIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
    <path strokeLinecap="round" strokeLinejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
  </svg>
);

// const ClockIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
//   <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
//     <path strokeLinecap="round" strokeLinejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
//   </svg>
// );

const ExternalLinkIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
    <path strokeLinecap="round" strokeLinejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
  </svg>
);

const LiveDotIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" {...props}>
    <circle cx="50" cy="50" r="40" fill="currentColor"/>
  </svg>
);


interface AdminDashboardPageProps {
  currentUser: User | null;
}

interface RealtimeAnalyticsData {
  activeUsers: number;
  topPages: { name: string; users: number }[];
  message?: string;
}

const AdminDashboardPage: React.FC<AdminDashboardPageProps> = ({ currentUser }) => {
  const [realtimeData, setRealtimeData] = useState<RealtimeAnalyticsData | null>(null);
  const [realtimeError, setRealtimeError] = useState<string | null>(null);
  const [isLoadingRealtime, setIsLoadingRealtime] = useState<boolean>(true);

  const fetchRealtimeData = async () => {
    try {
      setRealtimeError(null);
      const response = await fetch('/api/analytics/realtime-data');
      const data: RealtimeAnalyticsData = await response.json();
      if (!response.ok) {
        throw new Error(data.message || `Error ${response.status} fetching real-time data`);
      }
      setRealtimeData(data);
    } catch (err) {
      if (err instanceof Error) {
        setRealtimeError(err.message);
      } else {
        setRealtimeError('An unknown error occurred while fetching real-time analytics.');
      }
      setRealtimeData({ activeUsers: 0, topPages: [] }); // Reset on error
    } finally {
      setIsLoadingRealtime(false);
    }
  };

  useEffect(() => {
    fetchRealtimeData(); // Initial fetch
    const intervalId = setInterval(fetchRealtimeData, 30000); // Fetch every 30 seconds
    return () => clearInterval(intervalId); // Cleanup interval on component unmount
  }, []);


  if (!currentUser) {
    return (
      <div className="text-center py-10">
        <h1 className="text-2xl font-semibold text-gray-700">Loading admin data or not authorized...</h1>
      </div>
    );
  }

  return (
    <div className="space-y-8">
      <header className="bg-white shadow rounded-lg p-6">
        <h1 className="text-3xl font-bold text-gray-800">
          Admin Dashboard
        </h1>
        <p className="text-gray-600 mt-1">Welcome, {currentUser.name || 'Admin'}! ({currentUser.email})</p>
      </header>

      {/* Analytics Section */}
      <section className="bg-white shadow rounded-lg p-6 space-y-6">
        <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
          <h2 className="text-2xl font-bold text-gray-800">Website Analytics</h2>
          <a
            href="https://analytics.google.com/"
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-md transition-colors text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2"
          >
            <ExternalLinkIcon className="w-5 h-5 mr-2" />
            Full Google Analytics Dashboard
          </a>
        </div>
        
        {/* Key Metrics Overview Section */}
        <div>
            <h3 className="text-xl font-semibold text-gray-700 mb-4">Key Metrics Overview</h3>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                {/* Active Users - Live */}
                <div className="bg-white p-5 rounded-lg shadow border-t-4 border-red-500">
                    <div className="flex items-center mb-3">
                        <LiveDotIcon className="w-5 h-5 text-red-500 mr-2 animate-pulse" />
                        <h4 className="text-lg font-semibold text-gray-700">Current Active Users</h4>
                    </div>
                    {isLoadingRealtime && <p className="text-4xl font-bold text-gray-800">Loading...</p>}
                    {!isLoadingRealtime && realtimeData && <p className="text-4xl font-bold text-gray-800">{realtimeData.activeUsers}</p>}
                    {!isLoadingRealtime && realtimeError && <p className="text-sm text-red-500 mt-1">Error loading</p>}
                     <p className="text-sm text-gray-500 mt-1">Live from Google Analytics</p>
                </div>
                
                {/* Total Users - Placeholder */}
                <div className="bg-white p-5 rounded-lg shadow border-t-4 border-blue-500">
                    <div className="flex items-center mb-3">
                        <UsersIcon className="w-8 h-8 text-blue-500 mr-3"/>
                        <h4 className="text-lg font-semibold text-gray-700">Total Users</h4>
                    </div>
                    <p className="text-4xl font-bold text-gray-800">1,234</p>
                    <p className="text-sm text-gray-500 mt-1">Registered (Example)</p>
                </div>
                
                {/* CVs Generated - Placeholder */}
                <div className="bg-white p-5 rounded-lg shadow border-t-4 border-green-500">
                    <div className="flex items-center mb-3">
                        <DocumentTextIcon className="w-8 h-8 text-green-500 mr-3"/>
                        <h4 className="text-lg font-semibold text-gray-700">CVs Generated</h4>
                    </div>
                    <p className="text-4xl font-bold text-gray-800">5,678</p>
                    <p className="text-sm text-gray-500 mt-1">Successfully created (Example)</p>
                </div>
            </div>
            {realtimeError && (
                 <p className="text-xs text-red-500 mt-4 text-center">
                    Real-time data error: {realtimeError}. Ensure GA_PROPERTY_ID and service account credentials are correctly set on the server.
                 </p>
            )}
            {!realtimeError && !isLoadingRealtime && realtimeData?.message && (
                 <p className="text-xs text-yellow-600 mt-4 text-center">
                    Note: {realtimeData.message}
                 </p>
            )}
        </div>

         {/* Top Active Pages - Live */}
        {!isLoadingRealtime && realtimeData && realtimeData.topPages.length > 0 && (
          <div className="mt-6">
            <h3 className="text-lg font-semibold text-gray-700 mb-3">Top Active Pages Right Now</h3>
            <div className="bg-gray-50 p-4 rounded-lg shadow-inner">
              <ul className="space-y-2">
                {realtimeData.topPages.map((page, index) => (
                  <li key={index} className="flex justify-between items-center text-sm text-gray-700">
                    <span>{page.name || 'Unknown/Direct'}</span>
                    <span className="font-semibold text-gray-900">{page.users} user(s)</span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        )}
      </section>


      {/* User Management Section (Placeholder) */}
      <section className="bg-white shadow rounded-lg p-6">
        <h2 className="text-xl font-semibold text-gray-700 mb-4">User Management</h2>
        <div className="text-center py-8 border-2 border-dashed border-gray-300 rounded-md">
          <p className="text-gray-500">User list and management tools will appear here.</p>
          <button className="mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition">
            View All Users (UI Only)
          </button>
        </div>
      </section>

      {/* Content Moderation/Settings Section (Placeholder) */}
      <section className="bg-white shadow rounded-lg p-6">
        <h2 className="text-xl font-semibold text-gray-700 mb-4">System Settings</h2>
        <div className="space-y-3">
          <div className="flex items-center justify-between">
            <span className="text-gray-600">Maintenance Mode</span>
            <button className="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-sm">
                Toggle (UI Only)
            </button>
          </div>
          <div className="flex items-center justify-between">
            <span className="text-gray-600">API Key Configuration</span>
             <button className="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-sm">
                Manage Keys (UI Only)
            </button>
          </div>
        </div>
      </section>
    </div>
  );
};

export default AdminDashboardPage;
```

```bash
pages\ContactUsPage.tsx



import React from 'react';

const ContactUsPage: React.FC = () => {
  return (
    <div className="bg-white shadow-lg rounded-xl p-6 sm:p-8 lg:p-10 max-w-3xl mx-auto my-8">
      <header className="text-center mb-10">
        <h1 className="text-4xl sm:text-5xl font-bold text-gray-800 mb-4">
          Get in Touch
        </h1>
        <p className="text-xl text-gray-600">
          We're here to help and answer any questions you might have.
        </p>
      </header>

      <section className="mb-8">
        <h2 className="text-2xl font-semibold text-gray-700 mb-4">Contact Information</h2>
        <p className="text-gray-700 leading-relaxed mb-2">
          For support, inquiries, or feedback, please reach out to us:
        </p>
        <ul className="list-none space-y-3 text-gray-700">
          <li>
            <strong>Email Support:</strong> <a href="mailto:support@aicvmaker.com" className="text-blue-600 hover:text-blue-700 hover:underline">support@aicvmaker.com</a>
            <p className="text-sm text-gray-500">We typically respond within 24-48 business hours.</p>
          </li>
          <li>
            <strong>Mailing Address (Placeholder):</strong>
            <p className="text-gray-600">123 AI Avenue, Innovation City, Tech State, 90210</p>
          </li>
        </ul>
      </section>
      
      <section className="mb-8">
        <h2 className="text-2xl font-semibold text-gray-700 mb-4">Feedback & Suggestions</h2>
        <p className="text-gray-700 leading-relaxed mb-4">
          Your feedback is invaluable to us! If you have any suggestions on how we can improve AI CV Maker, or if you've encountered any issues, please don't hesitate to let us know. We are constantly working to enhance our platform and provide the best possible experience for our users.
        </p>
      </section>

      <section>
        <h2 className="text-2xl font-semibold text-gray-700 mb-4">Business Inquiries</h2>
        <p className="text-gray-700 leading-relaxed">
          For partnership opportunities, media inquiries, or other business-related matters, please contact us at <a href="mailto:business@aicvmaker.com" className="text-blue-600 hover:text-blue-700 hover:underline">business@aicvmaker.com</a>.
        </p>
      </section>

      {/* Placeholder for a contact form if needed in the future */}
      {/* 
      <section className="mt-10 pt-6 border-t border-gray-200">
        <h2 className="text-2xl font-semibold text-gray-700 mb-4">Send Us a Message (Form Placeholder)</h2>
        <form className="space-y-4">
          <div>
            <label htmlFor="name" className="block text-sm font-medium text-gray-700">Full Name</label>
            <input type="text" name="name" id="name" className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
          </div>
          <div>
            <label htmlFor="email" className="block text-sm font-medium text-gray-700">Email Address</label>
            <input type="email" name="email" id="email" className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
          </div>
          <div>
            <label htmlFor="message" className="block text-sm font-medium text-gray-700">Message</label>
            <textarea name="message" id="message" rows={4} className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></textarea>
          </div>
          <div>
            <button type="submit" className="w-full sm:w-auto px-6 py-2.5 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
              Send Message (UI Only)
            </button>
          </div>
        </form>
      </section>
      */}
    </div>
  );
};

export default ContactUsPage;

```

```bash
pages\DashboardPage.tsx



import React, { useState } from 'react';
import type { User } from '../App'; // Assuming User interface is in App.tsx

interface DashboardPageProps {
  currentUser: User | null;
}

const DashboardPage: React.FC<DashboardPageProps> = ({ currentUser }) => {
  const [name, setName] = useState(currentUser?.name || '');
  const [email, setEmail] = useState(currentUser?.email || '');

  const handleProfileUpdate = (e: React.FormEvent) => {
    e.preventDefault();
    // Placeholder for profile update logic
    console.log('Update profile with:', { name, email });
    alert('Profile update functionality is not yet implemented.');
  };

  const handleDeleteAccount = () => {
    if (window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
      // Placeholder for account deletion logic
      console.log('Delete account for user:', currentUser?.id);
      alert('Account deletion functionality is not yet implemented.');
    }
  };

  if (!currentUser) {
    // This should ideally not happen if ProtectedRoute is working correctly,
    // but as a fallback:
    return (
        <div className="text-center py-10">
            <h1 className="text-2xl font-semibold text-gray-700">Loading user data or not logged in...</h1>
        </div>
    );
  }

  return (
    <div className="space-y-8">
      <header className="bg-white shadow rounded-lg p-6">
        <h1 className="text-3xl font-bold text-gray-800">
          Welcome, {currentUser.name || 'User'}!
        </h1>
        <p className="text-gray-600 mt-1">Manage your profile and CVs here.</p>
      </header>

      {/* Personal Information / Edit Profile Section */}
      <section className="bg-white shadow rounded-lg p-6">
        <h2 className="text-xl font-semibold text-gray-700 mb-4">Edit Profile</h2>
        <form onSubmit={handleProfileUpdate} className="space-y-4">
          <div>
            <label htmlFor="dashboard-name" className="block text-sm font-medium text-gray-700">
              Full Name
            </label>
            <input
              type="text"
              id="dashboard-name"
              value={name}
              onChange={(e) => setName(e.target.value)}
              className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
              autoComplete="name"
            />
          </div>
          <div>
            <label htmlFor="dashboard-email" className="block text-sm font-medium text-gray-700">
              Email Address
            </label>
            <input
              type="email"
              id="dashboard-email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
              autoComplete="email"
              readOnly={!!currentUser.google_id} // Make email read-only if signed in with Google
              disabled={!!currentUser.google_id}
              aria-describedby={currentUser.google_id ? "email-readonly-description" : undefined}
            />
            {currentUser.google_id && (
                <p id="email-readonly-description" className="mt-1 text-xs text-gray-500">Email is managed by your Google account.</p>
            )}
          </div>
          <button
            type="submit"
            className="w-full sm:w-auto px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
          >
            Save Changes (UI Only)
          </button>
        </form>
      </section>

      {/* My Saved CVs Section (Placeholder) */}
      <section className="bg-white shadow rounded-lg p-6">
        <h2 className="text-xl font-semibold text-gray-700 mb-4">My Saved CVs</h2>
        <div className="text-center py-8 border-2 border-dashed border-gray-300 rounded-md">
          <p className="text-gray-500">You have no saved CVs yet.</p>
          <p className="text-gray-500 mt-1">Generated CVs will appear here.</p>
          {/* In the future, list CVs or link to generate new one */}
        </div>
      </section>

      {/* Account Settings Section */}
      <section className="bg-white shadow rounded-lg p-6">
        <h2 className="text-xl font-semibold text-gray-700 mb-4">Account Settings</h2>
        <div>
          <h3 className="text-md font-medium text-gray-700">Delete Account</h3>
          <p className="text-sm text-gray-500 mt-1 mb-3">
            Permanently delete your account and all associated data. This action cannot be undone.
          </p>
          <button
            onClick={handleDeleteAccount}
            className="w-full sm:w-auto px-4 py-2 bg-red-600 text-white font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"
          >
            Delete My Account (UI Only)
          </button>
        </div>
      </section>
    </div>
  );
};

export default DashboardPage;

```

```bash
pages\DataSharingGdprPage.tsx



import React from 'react';
import { Link } from 'react-router-dom';

const DataSharingGdprPage: React.FC = () => {
  const lastUpdated = "October 26, 2023"; // Example date

  return (
    <div className="bg-white shadow-lg rounded-xl p-6 sm:p-8 lg:p-10 max-w-4xl mx-auto my-8 text-gray-700 leading-relaxed">
      <header className="text-center mb-10">
        <h1 className="text-4xl sm:text-5xl font-bold text-gray-800 mb-3">
          Data Sharing, AI, & Your GDPR Rights
        </h1>
        <p className="text-md text-gray-500">Last Updated: {lastUpdated}</p>
      </header>

      <p className="mb-6 text-lg">
        At AI CV Maker, transparency about how your data is used is paramount, especially when interacting with advanced AI technologies. This page details how your data is handled in relation to our AI-powered CV generation services and outlines your rights under the General Data Protection Regulation (GDPR).
      </p>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">1. What Data Do We Process for AI CV Generation?</h2>
        <p className="mb-3">To provide you with tailored CV outlines, our AI models need to process the information you provide. This includes:</p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>Job Information:</strong> The job title or job description you input for which you want a CV.
          </li>
          <li>
            <strong>Your Profile Data (if logged in and provided):</strong> Information from your user profile, such as past work experiences, education, skills, and personal details, is used to customize the CV outline further.
          </li>
        </ul>
        <p>
          We strive to use only the necessary data to generate relevant and high-quality CV content for you.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">2. How Is Your Data Shared with AI Models?</h2>
        <p className="mb-3">
          When you request a CV generation, the relevant data mentioned above is sent to our third-party AI model provider via a secure API. The AI model processes this data to understand the context and generate a CV outline.
        </p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>Purpose Limitation:</strong> Your data is shared with the AI model solely for the purpose of generating the CV content you requested.
          </li>
          <li>
            <strong>Data Security in Transit:</strong> We use encrypted connections (HTTPS) to transmit data to and from the AI service.
          </li>
          <li>
            <strong>AI Provider Policies:</strong> We rely on the data privacy and security commitments of our AI provider. They typically do not use data submitted via their enterprise APIs to train their general models unless explicitly stated or configured otherwise. We encourage you to review the API-specific data usage policies of such providers.
          </li>
        </ul>
      </section>
      
      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">3. Your Consent</h2>
        <p className="mb-3">
          By using the AI CV generation feature of our Services, you consent to the processing and sharing of your provided information (job details and relevant profile data) with our AI model provider as described herein for the purpose of creating your CV.
        </p>
        <p className="mb-3">
          If you are not comfortable with this data processing, please refrain from using the AI CV generation feature. You can still use other aspects of our platform if applicable.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">4. Data Storage and AI Model Training</h2>
        <p className="mb-3">
          The CV content generated for you is stored in your account if you are a registered user, allowing you to access and edit it later.
        </p>
        <p className="mb-3">
          AI CV Maker may use anonymized or aggregated data derived from user interactions and generated content to improve our Services, including fine-tuning our prompts or understanding common CV patterns. However, your direct personal identifiers are not used for training general AI models by our providers unless explicitly stated and consented to under specific programs (which is not our current practice for standard API usage).
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">5. Your Rights Under GDPR</h2>
        <p className="mb-3">
          If you are located in the European Economic Area (EEA), United Kingdom, or Switzerland, you have certain data protection rights under the GDPR. These include:
        </p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>The right to access:</strong> You have the right to request copies of your personal data.
          </li>
          <li>
            <strong>The right to rectification:</strong> You have the right to request that we correct any information you believe is inaccurate or complete information you believe is incomplete. Your user dashboard allows you to update most of your profile information directly.
          </li>
          <li>
            <strong>The right to erasure (right to be forgotten):</strong> You have the right to request that we erase your personal data, under certain conditions.
          </li>
          <li>
            <strong>The right to restrict processing:</strong> You have the right to request that we restrict the processing of your personal data, under certain conditions.
          </li>
          <li>
            <strong>The right to object to processing:</strong> You have the right to object to our processing of your personal data, under certain conditions.
          </li>
          <li>
            <strong>The right to data portability:</strong> You have the right to request that we transfer the data that we have collected to another organization, or directly to you, under certain conditions.
          </li>
          <li>
            <strong>The right to withdraw consent:</strong> If we are processing your personal data based on your consent, you have the right to withdraw that consent at any time.
          </li>
        </ul>
        <p>
          To exercise any of these rights, please contact us via our <Link to="/contact-us" className="text-blue-600 hover:underline">Contact Us</Link> page or email us at <a href="mailto:privacy@aicvmaker.com" className="text-blue-600 hover:underline">privacy@aicvmaker.com</a>. We will respond to your request within the timeframes mandated by GDPR.
        </p>
      </section>
      
      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">6. Google Analytics and Cookies</h2>
        <p className="mb-3">
            We use Google Analytics to understand how our visitors use the site. Google Analytics collects information such as how often users visit this site, what pages they visit when they do so, and what other sites they used prior to coming to this site. We use the information we get from Google Analytics only to improve this site. Google Analytics collects only the IP address assigned to you on the date you visit this site, rather than your name or other identifying information. We do not combine the information collected through the use of Google Analytics with personally identifiable information.
        </p>
        <p className="mb-3">
            Google's ability to use and share information collected by Google Analytics about your visits to this site is restricted by the Google Analytics Terms of Use and the Google Privacy Policy. You can prevent Google Analytics from recognizing you on return visits to this site by disabling cookies on your browser. For more general information on cookies, please see our <Link to="/privacy-policy" className="text-blue-600 hover:underline">Privacy Policy</Link>.
        </p>
        <p className="mb-3">
            If we implement third-party advertising on our Site, please be aware that these ad networks may use their own cookies and tracking technologies. For users in regions where GDPR or similar regulations apply, we will seek your explicit consent for the use of cookies for personalized advertising before such cookies are set. This consent will be managed through a cookie consent mechanism on our Site. Ad networks operate under their own privacy policies, which you should review.
        </p>
      </section>

      <section>
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">7. Contact Us for Data Inquiries</h2>
        <p>
          For any questions or concerns regarding your data, its use with AI, or your GDPR rights, please do not hesitate to reach out. You can find our contact details on the <Link to="/contact-us" className="text-blue-600 hover:underline">Contact Us</Link> page.
        </p>
      </section>
    </div>
  );
};

export default DataSharingGdprPage;

```

```bash
pages\PrivacyPolicyPage.tsx



import React from 'react';
import { Link } from 'react-router-dom';

const PrivacyPolicyPage: React.FC = () => {
  const lastUpdated = "October 26, 2023"; // Example date - Consider making this dynamic or easily updatable

  return (
    <div className="bg-white shadow-lg rounded-xl p-6 sm:p-8 lg:p-10 max-w-4xl mx-auto my-8 text-gray-700 leading-relaxed">
      <header className="text-center mb-10">
        <h1 className="text-4xl sm:text-5xl font-bold text-gray-800 mb-3">
          Privacy Policy
        </h1>
        <p className="text-md text-gray-500">Last Updated: {lastUpdated}</p>
      </header>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">1. Introduction</h2>
        <p className="mb-3">
          Welcome to AI CV Maker ("we," "us," or "our"). We are committed to protecting your personal information and your right to privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our AI-powered CV generation services (collectively, the "Services").
        </p>
        <p>
          Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site or use our Services.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">2. Information We Collect</h2>
        <p className="mb-3">We may collect information about you in a variety of ways. The information we may collect via the Services includes:</p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>Personal Data:</strong> Personally identifiable information, such as your name, email address, phone number, LinkedIn profile URL, address, date of birth, and any other information you voluntarily provide to us when you register for the Services or fill out your user profile.
          </li>
          <li>
            <strong>CV Content:</strong> All information you input for CV generation, including job titles, job descriptions, work experience details, education history, skills, and any other text or data you provide to be processed by our AI model for the purpose of creating your CV.
          </li>
          <li>
            <strong>Usage Data:</strong> Information automatically collected when you access and use the Services, such as your IP address, browser type, operating system, access times, and the pages you have viewed directly before and after accessing the Site. This may also include information about your interactions with our Services, like features utilized.
          </li>
          <li>
            <strong>Authentication Data:</strong> If you register or log in using Google, we will collect authentication information provided by Google, such as your Google ID, name, and email, as permitted by your Google account settings and Google's policies.
          </li>
        </ul>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">3. How We Use Your Information</h2>
        <p className="mb-3">Having accurate information about you permits us to provide you with a smooth, efficient, and customized experience. Specifically, we may use information collected about you via the Services to:</p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>Create and manage your account.</li>
          <li>Generate CVs and related career documents based on the information you provide and the job inputs.</li>
          <li>Improve our AI models and the overall quality of the CV generation service (typically using anonymized or aggregated data).</li>
          <li>Personalize your experience and allow us to deliver the type of content and product offerings in which you are most interested.</li>
          <li>Communicate with you about your account or our services, including updates and administrative messages.</li>
          <li>Monitor and analyze usage and trends to improve your experience with the Services.</li>
          <li>Protect the security and integrity of our Services, prevent fraud, and enforce our Terms of Service.</li>
          <li>Comply with legal obligations.</li>
        </ul>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">4. Disclosure of Your Information</h2>
        <p className="mb-3">We may share information we have collected about you in certain situations. Your information may be disclosed as follows:</p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>By Law or to Protect Rights:</strong> If we believe the release of information about you is necessary to respond to legal process, to investigate or remedy potential violations of our policies, or to protect the rights, property, and safety of others, we may share your information as permitted or required by any applicable law, rule, or regulation.
          </li>
          <li>
            <strong>Third-Party Service Providers:</strong> We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us or on our behalf and require access to such information to do that work (e.g., cloud hosting, AI model providers, database management, analytics providers). We make efforts to ensure these third parties handle your data securely and only for the purposes we specify.
          </li>
          <li>
            <strong>AI Model Interaction:</strong> Information you provide for CV generation (job info, your profile data) is sent to our third-party AI model provider to generate CV content. We aim to use AI services that prioritize data privacy and security. Please refer to our <Link to="/gdpr-consent" className="text-blue-600 hover:underline">Data Sharing & GDPR Consent</Link> page for more details.
          </li>
          <li>
            <strong>Business Transfers:</strong> We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business to another company.
          </li>
          <li>
            <strong>With Your Consent:</strong> We may disclose your personal information for any other purpose with your consent.
          </li>
        </ul>
        <p>We do not sell your personal information to third parties for their direct marketing purposes.</p>
      </section>
      
      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">5. Data Security</h2>
        <p className="mb-3">
          We use administrative, technical, and physical security measures to help protect your personal information. While we have taken reasonable steps to secure the personal information you provide to us, please be aware that despite our efforts, no security measures are perfect or impenetrable, and no method of data transmission can be guaranteed against any interception or other type of misuse.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">6. Data Retention</h2>
        <p className="mb-3">
          We will only keep your personal information for as long as it is necessary for the purposes set out in this privacy policy, unless a longer retention period is required or permitted by law (such as tax, accounting, or other legal requirements). When we have no ongoing legitimate business need to process your personal information, we will either delete or anonymize it, or, if this is not possible (for example, because your personal information has been stored in backup archives), then we will securely store your personal information and isolate it from any further processing until deletion is possible.
        </p>
      </section>
      
      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">7. Your Data Protection Rights</h2>
        <p className="mb-3">
          Depending on your location, you may have certain rights regarding your personal information. These may include the right to:
        </p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>Request access to and obtain a copy of your personal information.</li>
          <li>Request correction of any inaccurate or incomplete personal information.</li>
          <li>Request erasure of your personal information.</li>
          <li>Restrict or object to the processing of your personal information.</li>
          <li>Request portability of your personal information.</li>
          <li>Withdraw your consent at any time (if processing is based on consent).</li>
        </ul>
        <p>
           To exercise these rights, please contact us using the contact information provided below or on our <Link to="/contact-us" className="text-blue-600 hover:underline">Contact Us</Link> page. For more details specific to GDPR, please see our <Link to="/gdpr-consent" className="text-blue-600 hover:underline">Data Sharing & GDPR Consent</Link> page.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">8. Cookies and Tracking Technologies</h2>
        <p className="mb-3">
          We may use cookies, web beacons, tracking pixels, and other tracking technologies on the Site to help customize the Site and improve your experience. When you access the Site, your personal information is not collected through the use of tracking technology. Most browsers are set to accept cookies by default. You can remove or reject cookies, but be aware that such action could affect the availability and functionality of the Site.
        </p>
        <p className="mb-3">
          Our site uses Google Analytics for tracking page views and user interactions as described in our <Link to="/gdpr-consent" className="text-blue-600 hover:underline">Data Sharing & GDPR Consent</Link> page. For more information on how Google uses data when you use our partners' sites or apps, visit <a href="https://www.google.com/policies/privacy/partners/" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">www.google.com/policies/privacy/partners/</a>.
        </p>
        <p>
          For more information on advertising cookies and how to opt out, please see Section 9 below.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">9. Third-Party Advertising</h2>
        <p className="mb-3">
          We may use third-party advertising companies, such as Google AdSense, to serve ads when you visit the Site. These companies may use information (not including your name, address, email address, or telephone number) about your visits to this and other websites in order to provide advertisements about goods and services of interest to you.
        </p>
        <p className="mb-3">
          These third-party ad servers or ad networks use technology like cookies, JavaScript, or Web Beacons that are sent directly to your browser. They automatically receive your IP address when this happens. These technologies are used to measure the effectiveness of their advertising campaigns and/or to personalize the advertising content that you see.
        </p>
        <p className="mb-3">
          AI CV Maker has no access to or control over these cookies that are used by third-party advertisers. You should consult the respective privacy policies of these third-party ad servers for more detailed information on their practices as well as for instructions about how to opt-out of certain practices. Our privacy policy does not apply to, and we cannot control the activities of, such other advertisers or web sites.
        </p>
        <p className="mb-3">
          If you wish to disable cookies, you may do so through your individual browser options. More detailed information about cookie management with specific web browsers can be found at the browsers' respective websites.
        </p>
        <p className="mb-3">
          Users in the European Economic Area (EEA) and the UK will be asked to consent to the use of cookies for personalized advertising before such cookies are set.
        </p>
        <p className="mb-3">
          You can opt out of personalized advertising by visiting:
        </p>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>Google's Ad Settings: <a href="https://www.google.com/settings/ads" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">https://www.google.com/settings/ads</a></li>
          <li>Network Advertising Initiative (NAI) opt-out page: <a href="https://optout.networkadvertising.org/" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">https://optout.networkadvertising.org/</a></li>
          <li>Digital Advertising Alliance (DAA) opt-out page: <a href="https://optout.aboutads.info/" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">https://optout.aboutads.info/</a></li>
        </ul>
        <p>
          Please note that opting out of personalized advertising does not mean you will no longer see ads, but that the ads you see may be less relevant to your interests.
        </p>
      </section>
      
      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">10. Children's Privacy</h2>
        <p className="mb-3">
            Our Services are not directed to individuals under the age of 16 (or other age as required by local law), and we do not knowingly collect personal information from children. If we become aware that we have inadvertently collected personal information from a child, we will take reasonable steps to delete such information.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">11. Changes to This Privacy Policy</h2>
        <p className="mb-3">
          We may update this privacy policy from time to time. The updated version will be indicated by an updated "Last Updated" date and the updated version will be effective as soon as it is accessible. We encourage you to review this privacy policy frequently to be informed of how we are protecting your information.
        </p>
      </section>

      <section>
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">12. Contact Us</h2>
        <p>
          If you have questions or comments about this privacy policy, please contact us through our <Link to="/contact-us" className="text-blue-600 hover:underline">Contact Us</Link> page or at <a href="mailto:privacy@aicvmaker.com" className="text-blue-600 hover:underline">privacy@aicvmaker.com</a>.
        </p>
      </section>
    </div>
  );
};

export default PrivacyPolicyPage;

```

```bash
pages\RequestPasswordResetPage.tsx


import React, { useState, FormEvent } from 'react';
import { Link } from 'react-router-dom';
import { requestPasswordReset } from '../services/authService';
import { LoadingSpinner } from '../constants';

const RequestPasswordResetPage: React.FC = () => {
  const [email, setEmail] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [message, setMessage] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    setError(null);
    setMessage(null);
    setIsLoading(true);
    if (!email.includes('@')) {
        setError("Please enter a valid email address.");
        setIsLoading(false);
        return;
    }
    try {
      const response = await requestPasswordReset(email);
      setMessage(response.message); // Display generic success message from backend
    } catch (err) {
        // @ts-ignore
      setError(err.message || 'Failed to send password reset email. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-xl shadow-xl">
        <div>
          <h2 className="mt-6 text-center text-3xl font-extrabold text-gray-900">
            Forgot Your Password?
          </h2>
          <p className="mt-2 text-center text-sm text-gray-600">
            No problem! Enter your email address below and we'll send you a link to reset it.
          </p>
        </div>
        <form className="mt-8 space-y-6" onSubmit={handleSubmit}>
          <div className="rounded-md shadow-sm -space-y-px">
            <div>
              <label htmlFor="email-address" className="sr-only">
                Email address
              </label>
              <input
                id="email-address"
                name="email"
                type="email"
                autoComplete="email"
                required
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"
                placeholder="Enter your email address"
                disabled={isLoading || !!message} // Disable if loading or success message shown
              />
            </div>
          </div>

          {error && (
            <div className="p-3 bg-red-50 text-red-700 border border-red-300 rounded-md text-sm">
              {error}
            </div>
          )}
          {message && (
            <div className="p-3 bg-green-50 text-green-700 border border-green-300 rounded-md text-sm">
              {message}
            </div>
          )}

          <div>
            <button
              type="submit"
              disabled={isLoading || !!message} // Disable if loading or success message shown
              className="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-300"
            >
              {isLoading && LoadingSpinner}
              {isLoading ? 'Sending...' : 'Send Password Reset Email'}
            </button>
          </div>
        </form>
        <div className="text-sm text-center">
          <Link to="/" className="font-medium text-blue-600 hover:text-blue-500">
            Back to Home or Login
          </Link>
        </div>
      </div>
    </div>
  );
};

export default RequestPasswordResetPage;

```

```bash
pages\RequestVerificationPage.tsx



import React, { useState, FormEvent, useEffect } from 'react';
import { useLocation, Link, useNavigate } from 'react-router-dom';
import { requestResendVerificationEmail } from '../services/authService';
import { LoadingSpinner } from '../constants';

const RequestVerificationPage: React.FC = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const [email, setEmail] = useState(location.state?.email || '');
  const [isLoading, setIsLoading] = useState(false);
  const [message, setMessage] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (location.state?.email) {
      setEmail(location.state.email);
    }
  }, [location.state]);

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    setError(null);
    setMessage(null);
    setIsLoading(true);
    if (!email.includes('@')) {
        setError("Please enter a valid email address.");
        setIsLoading(false);
        return;
    }
    try {
      const response = await requestResendVerificationEmail(email);
      setMessage(response.message);
    } catch (err) { // @ts-ignore
      setError(err.message || 'Failed to send verification email. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-xl shadow-xl">
        <div>
          <h2 className="mt-6 text-center text-3xl font-extrabold text-gray-900">
            Resend Verification Email
          </h2>
          <p className="mt-2 text-center text-sm text-gray-600">
            Enter your email address to receive a new verification link.
          </p>
        </div>
        <form className="mt-8 space-y-6" onSubmit={handleSubmit}>
          <div className="rounded-md shadow-sm -space-y-px">
            <div>
              <label htmlFor="email-address" className="sr-only">
                Email address
              </label>
              <input
                id="email-address"
                name="email"
                type="email"
                autoComplete="email"
                required
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"
                placeholder="Email address"
                disabled={isLoading}
              />
            </div>
          </div>

          {error && (
            <div className="p-3 bg-red-50 text-red-700 border border-red-300 rounded-md text-sm">
              {error}
            </div>
          )}
          {message && (
            <div className="p-3 bg-green-50 text-green-700 border border-green-300 rounded-md text-sm">
              {message}
            </div>
          )}

          <div>
            <button
              type="submit"
              disabled={isLoading}
              className="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-300"
            >
              {isLoading && LoadingSpinner}
              {isLoading ? 'Sending...' : 'Resend Verification Email'}
            </button>
          </div>
        </form>
        <div className="text-sm text-center">
          <Link to="/" className="font-medium text-blue-600 hover:text-blue-500">
            Back to Home
          </Link>
           {!message && ( // Only show login link if no success message yet
             <>
                <span className="mx-2 text-gray-400">|</span>
                <button onClick={() => navigate('/')} className="font-medium text-blue-600 hover:text-blue-500 focus:outline-none">
                 Attempt Login
                </button>
            </>
           )}
        </div>
      </div>
    </div>
  );
};

export default RequestVerificationPage;

```

```bash
pages\ResetPasswordPage.tsx


import React, { useState, FormEvent, useEffect } from 'react';
import { useSearchParams, Link, useNavigate } from 'react-router-dom';
import { resetPassword } from '../services/authService';
import { LoadingSpinner } from '../constants';

const ResetPasswordPage: React.FC = () => {
  const [searchParams] = useSearchParams();
  const navigate = useNavigate();
  const [token, setToken] = useState<string | null>(null);
  const [newPassword, setNewPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [message, setMessage] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const urlToken = searchParams.get('token');
    if (urlToken) {
      setToken(urlToken);
    } else {
      setError('Password reset token not found or invalid. Please request a new one.');
    }
  }, [searchParams]);

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    setError(null);
    setMessage(null);

    if (!token) {
      setError('Missing reset token. Please use the link from your email.');
      return;
    }
    if (newPassword.length < 6) {
      setError('Password must be at least 6 characters long.');
      return;
    }
    if (newPassword !== confirmPassword) {
      setError('Passwords do not match.');
      return;
    }
    setIsLoading(true);
    try {
      const response = await resetPassword(token, newPassword);
      setMessage(response.message);
      // Optionally redirect to login after a delay or on button click
      setTimeout(() => navigate('/'), 3000); // Redirect to home (which might open login modal)
    } catch (err) {
        // @ts-ignore
      setError(err.message || 'Failed to reset password. The link may be invalid or expired.');
    } finally {
      setIsLoading(false);
    }
  };

  if (!token && !error) { // If token is still null but no error set yet (e.g. on initial load)
    return (
        <div className="flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8">
            <div className="max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-xl shadow-xl text-center">
                <p className="text-gray-700">Loading reset token...</p>
            </div>
        </div>
    );
  }


  return (
    <div className="flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-xl shadow-xl">
        <div>
          <h2 className="mt-6 text-center text-3xl font-extrabold text-gray-900">
            Reset Your Password
          </h2>
          <p className="mt-2 text-center text-sm text-gray-600">
            Enter your new password below.
          </p>
        </div>
        {!message && (
          <form className="mt-8 space-y-6" onSubmit={handleSubmit}>
            <input type="hidden" name="token" value={token || ''} />
            <div className="rounded-md shadow-sm space-y-4">
              <div>
                <label htmlFor="new-password" className="sr-only">New Password</label>
                <input
                  id="new-password"
                  name="newPassword"
                  type="password"
                  required
                  value={newPassword}
                  onChange={(e) => setNewPassword(e.target.value)}
                  className="appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"
                  placeholder="New Password (min. 6 characters)"
                  disabled={isLoading || !!error || !token}
                />
              </div>
              <div>
                <label htmlFor="confirm-password" className="sr-only">Confirm New Password</label>
                <input
                  id="confirm-password"
                  name="confirmPassword"
                  type="password"
                  required
                  value={confirmPassword}
                  onChange={(e) => setConfirmPassword(e.target.value)}
                  className="appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"
                  placeholder="Confirm New Password"
                  disabled={isLoading || !!error || !token}
                />
              </div>
            </div>

            {error && (
              <div className="p-3 bg-red-50 text-red-700 border border-red-300 rounded-md text-sm">
                {error}
              </div>
            )}

            <div>
              <button
                type="submit"
                disabled={isLoading || !!error || !token || !!message}
                className="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-300"
              >
                {isLoading && LoadingSpinner}
                {isLoading ? 'Resetting Password...' : 'Reset Password'}
              </button>
            </div>
          </form>
        )}
        {message && (
          <div className="p-3 bg-green-50 text-green-700 border border-green-300 rounded-md text-sm text-center">
            {message}
            <p className="mt-2">
              You will be redirected to the homepage shortly.
              Or <Link to="/" className="font-medium text-blue-600 hover:text-blue-500">
                click here to login
              </Link>.
            </p>
          </div>
        )}
         {error && !message && ( // Show link to request new token if there was an error and no success
            <div className="text-sm text-center mt-4">
                <Link to="/request-password-reset" className="font-medium text-blue-600 hover:text-blue-500">
                    Request a new password reset link
                </Link>
            </div>
        )}
      </div>
    </div>
  );
};

export default ResetPasswordPage;

```

```bash
pages\TermsOfServicePage.tsx



import React from 'react';
import { Link } from 'react-router-dom';

const TermsOfServicePage: React.FC = () => {
  const lastUpdated = "October 26, 2023"; // Example date

  return (
    <div className="bg-white shadow-lg rounded-xl p-6 sm:p-8 lg:p-10 max-w-4xl mx-auto my-8 text-gray-700 leading-relaxed">
      <header className="text-center mb-10">
        <h1 className="text-4xl sm:text-5xl font-bold text-gray-800 mb-3">
          Terms of Service
        </h1>
        <p className="text-md text-gray-500">Last Updated: {lastUpdated}</p>
      </header>

      <p className="mb-6">
        Welcome to AI CV Maker! These Terms of Service ("Terms") govern your use of our website, applications, and services, including our AI-powered CV generation tools (collectively, the "Services"). By accessing or using our Services, you agree to be bound by these Terms and our <Link to="/privacy-policy" className="text-blue-600 hover:underline">Privacy Policy</Link>. If you do not agree to these Terms, do not use our Services.
      </p>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">1. Use of Services</h2>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>Eligibility:</strong> You must be at least 16 years old (or the age of legal majority in your jurisdiction) to use our Services.
          </li>
          <li>
            <strong>Account Registration:</strong> You may need to register for an account to access certain features. You agree to provide accurate, current, and complete information during registration and to update such information to keep it accurate. You are responsible for safeguarding your account password and for all activities that occur under your account.
          </li>
          <li>
            <strong>Acceptable Use:</strong> You agree not to use the Services for any unlawful purpose or in any way that interrupts, damages, or impairs the service. You will not attempt to gain unauthorized access to our systems or engage in any activity that disrupts the Services for other users.
          </li>
        </ul>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">2. CV Content and AI Generation</h2>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>User Responsibility:</strong> You are solely responsible for the accuracy, legality, and completeness of the information you provide for CV generation. AI CV Maker is a tool to assist you; the final CV content is your responsibility to review and verify.
          </li>
          <li>
            <strong>AI Output:</strong> The CVs generated by our AI are based on the information you provide and the patterns learned by the AI model. While we strive for high-quality output, we do not guarantee that the generated CV will secure you an interview or employment. The AI may sometimes produce inaccurate or incomplete information.
          </li>
          <li>
            <strong>No Professional Advice:</strong> The Services provide AI-generated suggestions and outlines. This does not constitute professional career advice, HR consulting, or legal advice.
          </li>
        </ul>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">3. Intellectual Property</h2>
        <ul className="list-disc list-inside space-y-2 pl-4 mb-3">
          <li>
            <strong>Our IP:</strong> The Services, including our website, software, design, text, graphics, and the AI models (excluding the user-provided data fed into them for specific generation tasks and the resulting user-specific output), are the property of AI CV Maker or its licensors and are protected by intellectual property laws.
          </li>
          <li>
            <strong>Your Content:</strong> You retain all ownership rights to the personal information and raw content you submit to the Services. By using the Services, you grant us a worldwide, non-exclusive, royalty-free license to use, process, and transmit your content solely for the purpose of providing and improving the Services, including training our AI models (typically on an anonymized or aggregated basis, as detailed in our Privacy Policy).
          </li>
          <li>
            <strong>Generated CVs:</strong> You own the specific CV document generated for you based on your input. However, the underlying templates, AI-generated phrases (if generic), and structure provided by the Service remain our intellectual property or that of our licensors.
          </li>
        </ul>
      </section>
      
      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">4. Fees and Payment (If Applicable)</h2>
        <p className="mb-3">
          Currently, basic access to AI CV Maker may be free. We reserve the right to introduce fees for certain features or subscription plans in the future. Any such changes will be communicated to you in advance, and your continued use of fee-based services will require your agreement to the payment terms.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">5. Disclaimers</h2>
        <p className="mb-3">
          THE SERVICES ARE PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT. AI CV MAKER DOES NOT WARRANT THAT THE SERVICES WILL BE UNINTERRUPTED, ERROR-FREE, OR COMPLETELY SECURE.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">6. Limitation of Liability</h2>
        <p className="mb-3">
          TO THE FULLEST EXTENT PERMITTED BY APPLICABLE LAW, AI CV MAKER SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM (A) YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICES; (B) ANY CONDUCT OR CONTENT OF ANY THIRD PARTY ON THE SERVICES; OR (C) UNAUTHORIZED ACCESS, USE, OR ALTERATION OF YOUR TRANSMISSIONS OR CONTENT.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">7. Indemnification</h2>
        <p className="mb-3">
          You agree to indemnify and hold harmless AI CV Maker and its officers, directors, employees, and agents from and against any claims, liabilities, damages, losses, and expenses, including reasonable attorneys' fees, arising out of or in any way connected with your access to or use of the Services or your violation of these Terms.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">8. Termination</h2>
        <p className="mb-3">
          We may terminate or suspend your access to our Services immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. Upon termination, your right to use the Services will immediately cease.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">9. Governing Law</h2>
        <p className="mb-3">
          These Terms shall be governed and construed in accordance with the laws of [Your Jurisdiction - e.g., State of California, USA], without regard to its conflict of law provisions.
        </p>
      </section>

      <section className="mb-6">
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">10. Changes to Terms</h2>
        <p className="mb-3">
          We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Services after any revisions become effective, you agree to be bound by the revised terms.
        </p>
      </section>

      <section>
        <h2 className="text-2xl font-semibold text-gray-800 mb-2">11. Contact Us</h2>
        <p>
          If you have any questions about these Terms, please contact us through our <Link to="/contact-us" className="text-blue-600 hover:underline">Contact Us</Link> page or at <a href="mailto:legal@aicvmaker.com" className="text-blue-600 hover:underline">legal@aicvmaker.com</a>.
        </p>
      </section>
    </div>
  );
};

export default TermsOfServicePage;

```

```bash
pages\UserDashboardPage.tsx



import React, { useState, useEffect } from 'react';
import type { User, AddressInfo, WorkExperience, EducationEntry, LanguageEntry, AwardEntry, PublicationEntry, SeminarEntry, HobbyEntry } from '../App'; 
import { v4 as uuidv4 } from 'uuid';

interface UserDashboardPageProps {
  currentUser: User | null;
}

const UserDashboardPage: React.FC<UserDashboardPageProps> = ({ currentUser }) => {
  // Personal Info
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [phoneNumber, setPhoneNumber] = useState('');
  const [linkedinUrl, setLinkedinUrl] = useState('');
  const [headline, setHeadline] = useState('');
  const [address, setAddress] = useState<AddressInfo>({ street: '', city: '', country: '', postalCode: '' });
  const [dateOfBirth, setDateOfBirth] = useState('');
  const [profilePhotoUrl, setProfilePhotoUrl] = useState('');
  const [skillsSummary, setSkillsSummary] = useState('');

  // Work Experience
  const [workExperiences, setWorkExperiences] = useState<WorkExperience[]>([]);
  // Education
  const [educations, setEducations] = useState<EducationEntry[]>([]);
  // New Profile Fields
  const [languages, setLanguages] = useState<LanguageEntry[]>([]);
  const [awards, setAwards] = useState<AwardEntry[]>([]);
  const [publications, setPublications] = useState<PublicationEntry[]>([]);
  const [seminars, setSeminars] = useState<SeminarEntry[]>([]);
  const [hobbies, setHobbies] = useState<HobbyEntry[]>([]);
  
  useEffect(() => {
    if (currentUser) {
      setName(currentUser.name || '');
      setEmail(currentUser.email || '');
      setPhoneNumber(currentUser.phoneNumber || '');
      setLinkedinUrl(currentUser.linkedinUrl || '');
      setHeadline(currentUser.headline || '');
      setAddress(currentUser.address || { street: '', city: '', country: '', postalCode: '' });
      setDateOfBirth(currentUser.dateOfBirth || '');
      setProfilePhotoUrl(currentUser.profilePhotoUrl || '');
      setSkillsSummary(currentUser.skillsSummary || '');
      setWorkExperiences(currentUser.workExperiences || []);
      setEducations(currentUser.educations || []);
      setLanguages(currentUser.languages || []);
      setAwards(currentUser.awards || []);
      setPublications(currentUser.publications || []);
      setSeminars(currentUser.seminars || []);
      setHobbies(currentUser.hobbies || []);
    }
  }, [currentUser]);

  const handleAddressChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setAddress({ ...address, [e.target.name]: e.target.value });
  };

  // Generic handler for changing array item fields
  const handleArrayItemChange = <T extends { id: string }>(
    items: T[], 
    setItems: React.Dispatch<React.SetStateAction<T[]>>, 
    index: number, 
    field: keyof T, 
    value: any
  ) => {
    const updatedItems = items.map((item, i) => {
      if (i === index) {
        return { ...item, [field]: value };
      }
      return item;
    });
    setItems(updatedItems);
  };
  
  // Generic handler for adding an item to an array
  const addArrayItem = <T extends { id: string }>(
    setItems: React.Dispatch<React.SetStateAction<T[]>>, 
    newItem: Omit<T, 'id'>
  ) => {
    // @ts-ignore
    setItems(prevItems => [...prevItems, { id: uuidv4(), ...newItem }]);
  };

  // Generic handler for removing an item from an array
  const removeArrayItem = <T extends { id: string }>(
    items: T[],
    setItems: React.Dispatch<React.SetStateAction<T[]>>, 
    idToRemove: string
  ) => {
    setItems(items.filter(item => item.id !== idToRemove));
  };


  // Work Experience Handlers
  const addWorkExperience = () => addArrayItem<WorkExperience>(setWorkExperiences, { company: '', title: '', startDate: '', endDate: '', description: '', isPresent: false });
  const handleWorkExperienceChange = (index: number, field: keyof WorkExperience, value: string | boolean) => {
    const updatedExperiences = [...workExperiences];
    const experienceToUpdate = updatedExperiences[index];
    // @ts-ignore
    experienceToUpdate[field] = value;
    if (field === 'isPresent' && value) experienceToUpdate.endDate = '';
    setWorkExperiences(updatedExperiences);
  };
  const removeWorkExperience = (id: string) => removeArrayItem(workExperiences, setWorkExperiences, id);

  // Education Handlers
  const addEducationEntry = () => addArrayItem<EducationEntry>(setEducations, { institution: '', degree: '', fieldOfStudy: '', startDate: '', endDate: '', description: '', isCurrent: false });
  const handleEducationChange = (index: number, field: keyof EducationEntry, value: string | boolean) => {
    const updatedEducations = [...educations];
    const educationToUpdate = updatedEducations[index];
     // @ts-ignore
    educationToUpdate[field] = value;
    if (field === 'isCurrent' && value) educationToUpdate.endDate = '';
    setEducations(updatedEducations);
  };
  const removeEducationEntry = (id: string) => removeArrayItem(educations, setEducations, id);
  
  // Language Handlers
  const addLanguage = () => addArrayItem<LanguageEntry>(setLanguages, { languageName: '', proficiency: '' });
  const handleLanguageChange = (index: number, field: keyof LanguageEntry, value: string) => handleArrayItemChange(languages, setLanguages, index, field, value);
  const removeLanguage = (id: string) => removeArrayItem(languages, setLanguages, id);

  // Award Handlers
  const addAward = () => addArrayItem<AwardEntry>(setAwards, { awardName: '', issuer: '', date: '', description: '' });
  const handleAwardChange = (index: number, field: keyof AwardEntry, value: string) => handleArrayItemChange(awards, setAwards, index, field, value);
  const removeAward = (id: string) => removeArrayItem(awards, setAwards, id);

  // Publication Handlers
  const addPublication = () => addArrayItem<PublicationEntry>(setPublications, { title: '', journalOrPlatform: '', date: '', url: '', description: '' });
  const handlePublicationChange = (index: number, field: keyof PublicationEntry, value: string) => handleArrayItemChange(publications, setPublications, index, field, value);
  const removePublication = (id: string) => removeArrayItem(publications, setPublications, id);

  // Seminar Handlers
  const addSeminar = () => addArrayItem<SeminarEntry>(setSeminars, { seminarName: '', role: '', date: '', location: '', description: '' });
  const handleSeminarChange = (index: number, field: keyof SeminarEntry, value: string) => handleArrayItemChange(seminars, setSeminars, index, field, value);
  const removeSeminar = (id: string) => removeArrayItem(seminars, setSeminars, id);

  // Hobby Handlers
  const addHobby = () => addArrayItem<HobbyEntry>(setHobbies, { hobbyName: '' });
  const handleHobbyChange = (index: number, field: keyof HobbyEntry, value: string) => handleArrayItemChange(hobbies, setHobbies, index, field, value);
  const removeHobby = (id: string) => removeArrayItem(hobbies, setHobbies, id);


  const handleProfileUpdate = (e: React.FormEvent) => {
    e.preventDefault();
    const updatedProfileData = {
      name, email, phoneNumber, linkedinUrl, headline, address, dateOfBirth,
      profilePhotoUrl, skillsSummary, workExperiences, educations, languages,
      awards, publications, seminars, hobbies,
    };
    console.log('Update profile with:', updatedProfileData);
    alert('Profile update functionality is UI-only. Check console for data.');
  };

  const handleDeleteAccount = () => {
    if (window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
      console.log('Delete account for user:', currentUser?.id);
      alert('Account deletion functionality is not yet implemented.');
    }
  };
  
  const inputClass = "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm";
  const labelClass = "block text-sm font-medium text-gray-700";
  const sectionClass = "bg-white shadow rounded-lg p-6";
  const sectionTitleClass = "text-xl font-semibold text-gray-700 mb-6 border-b pb-2";
  const subSectionTitleClass = "text-lg font-medium text-gray-700 mb-3";
  const itemWrapperClass = "mb-6 p-4 border border-gray-200 rounded-md space-y-3 relative";
  const removeButtonClass = "absolute top-2 right-2 text-red-500 hover:text-red-700 text-xs font-medium bg-red-50 hover:bg-red-100 p-1 rounded-full";
  const addButtonClass = "mt-2 px-4 py-2 bg-green-500 text-white font-medium rounded-md hover:bg-green-600 transition-colors text-sm";


  if (!currentUser) {
    return (
        <div className="text-center py-10">
            <h1 className="text-2xl font-semibold text-gray-700">Loading user data or not logged in...</h1>
        </div>
    );
  }

  return (
    <div className="space-y-8 mb-10">
      <header className={`${sectionClass} !pb-4`}>
        <h1 className="text-3xl font-bold text-gray-800">
          Welcome, {currentUser.name || 'User'}!
        </h1>
        <p className="text-gray-600 mt-1">Manage your profile and CVs here. Fill out your profile thoroughly for better CV generation.</p>
      </header>

      <form onSubmit={handleProfileUpdate} className="space-y-8">
        {/* Personal Information Section (Existing - no changes needed here) */}
        <section className={sectionClass}>
          <h2 className={sectionTitleClass}>Personal Information</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div><label htmlFor="dashboard-name" className={labelClass}>Full Name</label><input type="text" id="dashboard-name" value={name} onChange={(e) => setName(e.target.value)} className={inputClass} autoComplete="name"/></div>
            <div><label htmlFor="dashboard-email" className={labelClass}>Email Address</label><input type="email" id="dashboard-email" value={email} onChange={(e) => setEmail(e.target.value)} className={`${inputClass} ${currentUser.google_id ? 'bg-gray-100 cursor-not-allowed' : ''}`} autoComplete="email" readOnly={!!currentUser.google_id} disabled={!!currentUser.google_id} aria-describedby={currentUser.google_id ? "email-readonly-description" : undefined} />{currentUser.google_id && (<p id="email-readonly-description" className="mt-1 text-xs text-gray-500">Email is managed by your Google account.</p>)}</div>
            <div><label htmlFor="dashboard-phone" className={labelClass}>Phone Number</label><input type="tel" id="dashboard-phone" value={phoneNumber} onChange={(e) => setPhoneNumber(e.target.value)} className={inputClass} autoComplete="tel"/></div>
            <div><label htmlFor="dashboard-linkedin" className={labelClass}>LinkedIn Profile URL</label><input type="url" id="dashboard-linkedin" value={linkedinUrl} onChange={(e) => setLinkedinUrl(e.target.value)} className={inputClass} placeholder="https://linkedin.com/in/yourprofile" autoComplete="url"/></div>
            <div className="md:col-span-2"><label htmlFor="dashboard-headline" className={labelClass}>Professional Headline</label><input type="text" id="dashboard-headline" value={headline} onChange={(e) => setHeadline(e.target.value)} className={inputClass} placeholder="e.g., Senior Software Engineer | AI Enthusiast"/></div>
            <div><label htmlFor="dashboard-dob" className={labelClass}>Date of Birth</label><input type="date" id="dashboard-dob" value={dateOfBirth} onChange={(e) => setDateOfBirth(e.target.value)} className={inputClass} /></div>
            <div><label htmlFor="dashboard-photo-url" className={labelClass}>Profile Photo URL</label><input type="url" id="dashboard-photo-url" value={profilePhotoUrl} onChange={(e) => setProfilePhotoUrl(e.target.value)} className={inputClass} placeholder="https://example.com/your-photo.jpg" autoComplete="photo"/></div>
            <div className="md:col-span-2"><h3 className={subSectionTitleClass}>Address</h3></div>
            <div><label htmlFor="dashboard-street" className={labelClass}>Street</label><input type="text" name="street" id="dashboard-street" value={address.street || ''} onChange={handleAddressChange} className={inputClass} autoComplete="street-address"/></div>
            <div><label htmlFor="dashboard-city" className={labelClass}>City</label><input type="text" name="city" id="dashboard-city" value={address.city || ''} onChange={handleAddressChange} className={inputClass} autoComplete="address-level2"/></div>
            <div><label htmlFor="dashboard-country" className={labelClass}>Country</label><input type="text" name="country" id="dashboard-country" value={address.country || ''} onChange={handleAddressChange} className={inputClass} autoComplete="country-name"/></div>
            <div><label htmlFor="dashboard-postalCode" className={labelClass}>Postal Code</label><input type="text" name="postalCode" id="dashboard-postalCode" value={address.postalCode || ''} onChange={handleAddressChange} className={inputClass} autoComplete="postal-code"/></div>
          </div>
        </section>

        {/* Work Experience Section (Existing - changed remove to use id) */}
        <section className={sectionClass}>
          <h2 className={sectionTitleClass}>Work Experience</h2>
          {workExperiences.map((exp, index) => (
            <div key={exp.id} className={itemWrapperClass}>
              <button type="button" onClick={() => removeWorkExperience(exp.id)} className={removeButtonClass} aria-label="Remove Experience">X</button>
              <h3 className={subSectionTitleClass}>Experience #{index + 1}</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div><label htmlFor={`work-company-${exp.id}`} className={labelClass}>Company Name</label><input type="text" id={`work-company-${exp.id}`} value={exp.company || ''} onChange={(e) => handleWorkExperienceChange(index, 'company', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`work-title-${exp.id}`} className={labelClass}>Job Title</label><input type="text" id={`work-title-${exp.id}`} value={exp.title || ''} onChange={(e) => handleWorkExperienceChange(index, 'title', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`work-start-${exp.id}`} className={labelClass}>Start Date</label><input type="month" id={`work-start-${exp.id}`} value={exp.startDate || ''} onChange={(e) => handleWorkExperienceChange(index, 'startDate', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`work-end-${exp.id}`} className={labelClass}>End Date</label><input type="month" id={`work-end-${exp.id}`} value={exp.endDate || ''} onChange={(e) => handleWorkExperienceChange(index, 'endDate', e.target.value)} className={inputClass} disabled={exp.isPresent} /><div className="mt-1"><input type="checkbox" id={`work-present-${exp.id}`} checked={exp.isPresent || false} onChange={(e) => handleWorkExperienceChange(index, 'isPresent', e.target.checked)} className="mr-2 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/><label htmlFor={`work-present-${exp.id}`} className="text-sm text-gray-600">I currently work here</label></div></div>
              </div>
              <div><label htmlFor={`work-desc-${exp.id}`} className={labelClass}>Responsibilities/Description</label><textarea id={`work-desc-${exp.id}`} value={exp.description || ''} onChange={(e) => handleWorkExperienceChange(index, 'description', e.target.value)} className={`${inputClass} h-24`} rows={3}></textarea></div>
            </div>
          ))}
          <button type="button" onClick={addWorkExperience} className={addButtonClass}>+ Add Work Experience</button>
        </section>

        {/* Education Section (Existing - changed remove to use id) */}
        <section className={sectionClass}>
          <h2 className={sectionTitleClass}>Education</h2>
          {educations.map((edu, index) => (
            <div key={edu.id} className={itemWrapperClass}>
               <button type="button" onClick={() => removeEducationEntry(edu.id)} className={removeButtonClass} aria-label="Remove Education">X</button>
              <h3 className={subSectionTitleClass}>Education #{index + 1}</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div><label htmlFor={`edu-institution-${edu.id}`} className={labelClass}>Institution Name</label><input type="text" id={`edu-institution-${edu.id}`} value={edu.institution || ''} onChange={(e) => handleEducationChange(index, 'institution', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`edu-degree-${edu.id}`} className={labelClass}>Degree/Certificate</label><input type="text" id={`edu-degree-${edu.id}`} value={edu.degree || ''} onChange={(e) => handleEducationChange(index, 'degree', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`edu-field-${edu.id}`} className={labelClass}>Field of Study</label><input type="text" id={`edu-field-${edu.id}`} value={edu.fieldOfStudy || ''} onChange={(e) => handleEducationChange(index, 'fieldOfStudy', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`edu-start-${edu.id}`} className={labelClass}>Start Date</label><input type="month" id={`edu-start-${edu.id}`} value={edu.startDate || ''} onChange={(e) => handleEducationChange(index, 'startDate', e.target.value)} className={inputClass} /></div>
                <div><label htmlFor={`edu-end-${edu.id}`} className={labelClass}>End Date/Expected</label><input type="month" id={`edu-end-${edu.id}`} value={edu.endDate || ''} onChange={(e) => handleEducationChange(index, 'endDate', e.target.value)} className={inputClass} disabled={edu.isCurrent} /><div className="mt-1"><input type="checkbox" id={`edu-current-${edu.id}`} checked={edu.isCurrent || false} onChange={(e) => handleEducationChange(index, 'isCurrent', e.target.checked)} className="mr-2 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/><label htmlFor={`edu-current-${edu.id}`} className="text-sm text-gray-600">I currently study here</label></div></div>
              </div>
              <div><label htmlFor={`edu-desc-${edu.id}`} className={labelClass}>Description/Achievements</label><textarea id={`edu-desc-${edu.id}`} value={edu.description || ''} onChange={(e) => handleEducationChange(index, 'description', e.target.value)} className={`${inputClass} h-24`} rows={3}></textarea></div>
            </div>
          ))}
          <button type="button" onClick={addEducationEntry} className={addButtonClass}>+ Add Education</button>
        </section>

        {/* Languages Section - New */}
        <section className={sectionClass}>
            <h2 className={sectionTitleClass}>Languages</h2>
            {languages.map((lang, index) => (
                <div key={lang.id} className={itemWrapperClass}>
                    <button type="button" onClick={() => removeLanguage(lang.id)} className={removeButtonClass} aria-label="Remove Language">X</button>
                    <h3 className={subSectionTitleClass}>Language #{index + 1}</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label htmlFor={`lang-name-${lang.id}`} className={labelClass}>Language</label>
                            <input type="text" id={`lang-name-${lang.id}`} value={lang.languageName || ''} onChange={(e) => handleLanguageChange(index, 'languageName', e.target.value)} className={inputClass} placeholder="e.g., English, Spanish" />
                        </div>
                        <div>
                            <label htmlFor={`lang-proficiency-${lang.id}`} className={labelClass}>Proficiency</label>
                            <select id={`lang-proficiency-${lang.id}`} value={lang.proficiency || ''} onChange={(e) => handleLanguageChange(index, 'proficiency', e.target.value as LanguageEntry['proficiency'])} className={inputClass}>
                                <option value="">Select proficiency</option>
                                <option value="Basic">Basic</option>
                                <option value="Conversational">Conversational</option>
                                <option value="Fluent">Fluent</option>
                                <option value="Native">Native</option>
                            </select>
                        </div>
                    </div>
                </div>
            ))}
            <button type="button" onClick={addLanguage} className={addButtonClass}>+ Add Language</button>
        </section>

        {/* Awards & Recognitions Section - New */}
        <section className={sectionClass}>
            <h2 className={sectionTitleClass}>Awards & Recognitions</h2>
            {awards.map((award, index) => (
                <div key={award.id} className={itemWrapperClass}>
                    <button type="button" onClick={() => removeAward(award.id)} className={removeButtonClass} aria-label="Remove Award">X</button>
                    <h3 className={subSectionTitleClass}>Award #{index + 1}</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><label htmlFor={`award-name-${award.id}`} className={labelClass}>Award Name</label><input type="text" id={`award-name-${award.id}`} value={award.awardName || ''} onChange={(e) => handleAwardChange(index, 'awardName', e.target.value)} className={inputClass} /></div>
                        <div><label htmlFor={`award-issuer-${award.id}`} className={labelClass}>Issuer</label><input type="text" id={`award-issuer-${award.id}`} value={award.issuer || ''} onChange={(e) => handleAwardChange(index, 'issuer', e.target.value)} className={inputClass} /></div>
                        <div><label htmlFor={`award-date-${award.id}`} className={labelClass}>Date Received</label><input type="month" id={`award-date-${award.id}`} value={award.date || ''} onChange={(e) => handleAwardChange(index, 'date', e.target.value)} className={inputClass} /></div>
                    </div>
                    <div><label htmlFor={`award-desc-${award.id}`} className={labelClass}>Description (Optional)</label><textarea id={`award-desc-${award.id}`} value={award.description || ''} onChange={(e) => handleAwardChange(index, 'description', e.target.value)} className={`${inputClass} h-20`} rows={2}></textarea></div>
                </div>
            ))}
            <button type="button" onClick={addAward} className={addButtonClass}>+ Add Award</button>
        </section>

        {/* Publications Section - New */}
        <section className={sectionClass}>
            <h2 className={sectionTitleClass}>Publications</h2>
            {publications.map((pub, index) => (
                <div key={pub.id} className={itemWrapperClass}>
                    <button type="button" onClick={() => removePublication(pub.id)} className={removeButtonClass} aria-label="Remove Publication">X</button>
                    <h3 className={subSectionTitleClass}>Publication #{index + 1}</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><label htmlFor={`pub-title-${pub.id}`} className={labelClass}>Title</label><input type="text" id={`pub-title-${pub.id}`} value={pub.title || ''} onChange={(e) => handlePublicationChange(index, 'title', e.target.value)} className={inputClass} /></div>
                        <div><label htmlFor={`pub-platform-${pub.id}`} className={labelClass}>Journal/Platform</label><input type="text" id={`pub-platform-${pub.id}`} value={pub.journalOrPlatform || ''} onChange={(e) => handlePublicationChange(index, 'journalOrPlatform', e.target.value)} className={inputClass} /></div>
                        <div><label htmlFor={`pub-date-${pub.id}`} className={labelClass}>Publication Date</label><input type="month" id={`pub-date-${pub.id}`} value={pub.date || ''} onChange={(e) => handlePublicationChange(index, 'date', e.target.value)} className={inputClass} /></div>
                        <div><label htmlFor={`pub-url-${pub.id}`} className={labelClass}>URL (Optional)</label><input type="url" id={`pub-url-${pub.id}`} value={pub.url || ''} onChange={(e) => handlePublicationChange(index, 'url', e.target.value)} className={inputClass} placeholder="https://example.com/publication"/></div>
                    </div>
                    <div><label htmlFor={`pub-desc-${pub.id}`} className={labelClass}>Description (Optional)</label><textarea id={`pub-desc-${pub.id}`} value={pub.description || ''} onChange={(e) => handlePublicationChange(index, 'description', e.target.value)} className={`${inputClass} h-20`} rows={2}></textarea></div>
                </div>
            ))}
            <button type="button" onClick={addPublication} className={addButtonClass}>+ Add Publication</button>
        </section>

        {/* Seminars & Conferences Section - New */}
        <section className={sectionClass}>
            <h2 className={sectionTitleClass}>Seminars & Conferences</h2>
            {seminars.map((sem, index) => (
                <div key={sem.id} className={itemWrapperClass}>
                    <button type="button" onClick={() => removeSeminar(sem.id)} className={removeButtonClass} aria-label="Remove Seminar">X</button>
                    <h3 className={subSectionTitleClass}>Seminar/Conference #{index + 1}</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><label htmlFor={`sem-name-${sem.id}`} className={labelClass}>Name</label><input type="text" id={`sem-name-${sem.id}`} value={sem.seminarName || ''} onChange={(e) => handleSeminarChange(index, 'seminarName', e.target.value)} className={inputClass} /></div>
                        <div>
                            <label htmlFor={`sem-role-${sem.id}`} className={labelClass}>Role</label>
                            <select id={`sem-role-${sem.id}`} value={sem.role || ''} onChange={(e) => handleSeminarChange(index, 'role', e.target.value as SeminarEntry['role'])} className={inputClass}>
                                <option value="">Select role</option>
                                <option value="Attendee">Attendee</option>
                                <option value="Speaker">Speaker</option>
                                <option value="Organizer">Organizer</option>
                            </select>
                        </div>
                        <div><label htmlFor={`sem-date-${sem.id}`} className={labelClass}>Date</label><input type="month" id={`sem-date-${sem.id}`} value={sem.date || ''} onChange={(e) => handleSeminarChange(index, 'date', e.target.value)} className={inputClass} /></div>
                        <div><label htmlFor={`sem-location-${sem.id}`} className={labelClass}>Location (Optional)</label><input type="text" id={`sem-location-${sem.id}`} value={sem.location || ''} onChange={(e) => handleSeminarChange(index, 'location', e.target.value)} className={inputClass} /></div>
                    </div>
                    <div><label htmlFor={`sem-desc-${sem.id}`} className={labelClass}>Description (Optional)</label><textarea id={`sem-desc-${sem.id}`} value={sem.description || ''} onChange={(e) => handleSeminarChange(index, 'description', e.target.value)} className={`${inputClass} h-20`} rows={2}></textarea></div>
                </div>
            ))}
            <button type="button" onClick={addSeminar} className={addButtonClass}>+ Add Seminar/Conference</button>
        </section>

        {/* Hobbies & Interests Section - New */}
        <section className={sectionClass}>
            <h2 className={sectionTitleClass}>Hobbies & Interests</h2>
            {hobbies.map((hobby, index) => (
                <div key={hobby.id} className={`${itemWrapperClass} !p-3`}>
                     <button type="button" onClick={() => removeHobby(hobby.id)} className={removeButtonClass} aria-label="Remove Hobby">X</button>
                    <div className="flex items-center">
                        <label htmlFor={`hobby-name-${hobby.id}`} className={`${labelClass} mr-2 sr-only`}>Hobby #{index + 1}</label>
                        <input type="text" id={`hobby-name-${hobby.id}`} value={hobby.hobbyName || ''} onChange={(e) => handleHobbyChange(index, 'hobbyName', e.target.value)} className={`${inputClass} !mt-0`} placeholder="e.g., Reading, Hiking" />
                    </div>
                </div>
            ))}
            <button type="button" onClick={addHobby} className={addButtonClass}>+ Add Hobby/Interest</button>
        </section>
        
        {/* Skills Summary Section (Existing - no changes) */}
        <section className={sectionClass}>
          <h2 className={sectionTitleClass}>Skills &amp; Other Information</h2>
          <div>
            <label htmlFor="dashboard-skills" className={labelClass}>
              General Skills Summary / Certifications (if not covered above)
            </label>
            <textarea
              id="dashboard-skills"
              value={skillsSummary}
              onChange={(e) => setSkillsSummary(e.target.value)}
              className={`${inputClass} h-32`}
              rows={5}
              placeholder="List your key skills, programming languages, tools, certifications, awards, etc."
            />
          </div>
        </section>

        <div className="pt-4 flex justify-end">
          <button
            type="submit"
            className="px-6 py-2.5 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
          >
            Save All Profile Changes (UI Only)
          </button>
        </div>
      </form>

      {/* Account Settings Section (Existing - no changes) */}
      <section className={`${sectionClass} mt-12 border-t-2 border-red-200`}>
        <h2 className="text-xl font-semibold text-red-600 mb-4">Account Danger Zone</h2>
        <div>
          <h3 className="text-md font-medium text-gray-700">Delete Account</h3>
          <p className="text-sm text-gray-500 mt-1 mb-3">
            Permanently delete your account and all associated data. This action cannot be undone.
          </p>
          <button
            onClick={handleDeleteAccount}
            className="w-full sm:w-auto px-4 py-2 bg-red-600 text-white font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"
          >
            Delete My Account (UI Only)
          </button>
        </div>
      </section>
    </div>
  );
};

export default UserDashboardPage;

```

```bash
pages\VerifyEmailPage.tsx



import React, { useEffect, useState } from 'react';
import { useSearchParams, Link } from 'react-router-dom';
import { verifyEmailToken } from '../services/authService';
import { LoadingSpinner } from '../constants';

const VerifyEmailPage: React.FC = () => {
  const [searchParams] = useSearchParams();
  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');
  const [message, setMessage] = useState<string | null>(null);

  useEffect(() => {
    const token = searchParams.get('token');
    if (token) {
      verifyEmailToken(token)
        .then((response) => {
          setStatus('success');
          setMessage(response.message);
        })
        .catch((err) => {
          setStatus('error');
          setMessage(err.message || 'An unknown error occurred during email verification.');
        });
    } else {
      setStatus('error');
      setMessage('Verification token not found in URL.');
    }
  }, [searchParams]);

  const renderContent = () => {
    switch (status) {
      case 'loading':
        return (
          <div className="flex flex-col items-center justify-center text-center">
            {LoadingSpinner}
            <p className="mt-3 text-lg text-gray-700">Verifying your email...</p>
          </div>
        );
      case 'success':
        return (
          <div className="text-center">
            <svg className="mx-auto h-16 w-16 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h2 className="mt-4 text-2xl font-semibold text-gray-800">Email Verified!</h2>
            <p className="mt-2 text-gray-600">{message}</p>
            <p className="mt-4">
              You can now close this page or <Link to="/" className="text-blue-600 hover:underline">return to the homepage</Link> to log in.
            </p>
          </div>
        );
      case 'error':
        return (
          <div className="text-center">
            <svg className="mx-auto h-16 w-16 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h2 className="mt-4 text-2xl font-semibold text-gray-800">Verification Failed</h2>
            <p className="mt-2 text-red-600">{message}</p>
            <p className="mt-4">
              If the link has expired, you can try to{' '}
              <Link to="/request-verification" className="text-blue-600 hover:underline">
                request a new verification email
              </Link>.
            </p>
            <p className="mt-2">
                Or <Link to="/" className="text-blue-600 hover:underline">return to the homepage</Link>.
            </p>
          </div>
        );
      default:
        return null;
    }
  };

  return (
    <div className="flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-xl shadow-xl">
        {renderContent()}
      </div>
    </div>
  );
};

export default VerifyEmailPage;

```

```bash
server\main.js


// This file implements a Node.js backend server.
// Dependencies: express, @google/genai, dotenv, mysql2, bcrypt, google-auth-library, @google-analytics/data, nodemailer, crypto
// Ensure .env file has API_KEY, DB credentials, GOOGLE_CLIENT_ID, GA_PROPERTY_ID, SMTP settings, FRONTEND_BASE_URL, and GOOGLE_APPLICATION_CREDENTIALS is set.

import express from 'express';
import { GoogleGenAI } from '@google/genai';
import dotenv from 'dotenv';
import mysql from 'mysql2/promise';
import bcrypt from 'bcrypt';
import { OAuth2Client } from 'google-auth-library';
import { BetaAnalyticsDataClient } from '@google-analytics/data';
import nodemailer from 'nodemailer';
import crypto from 'crypto';

dotenv.config(); // To load environment variables

const app = express();
const port = process.env.PORT || 3001;
const ADMIN_EMAIL = process.env.ADMIN_EMAIL || 'admin@aicvmaker.com';

// --- Middleware ---
app.use(express.json());

// --- Nodemailer Setup ---
const smtpConfig = {
  host: process.env.SMTP_HOST,
  port: parseInt(process.env.SMTP_PORT || "587", 10),
  secure: process.env.SMTP_SECURE === 'true', // true for 465, false for other ports
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASS,
  },
};

const mailTransporter = nodemailer.createTransport(smtpConfig);

const sendVerificationEmail = async (email, token) => {
  const verificationLink = `${process.env.FRONTEND_BASE_URL || 'http://localhost:5173'}/#/verify-email?token=${token}`;
  const mailOptions = {
    from: `"${process.env.SMTP_FROM_NAME || 'AI CV Maker'}" <${process.env.SMTP_FROM_EMAIL || 'noreply@aicvmaker.com'}>`,
    to: email,
    subject: 'Verify Your Email Address - AI CV Maker',
    html: `
      <div style="font-family: Arial, sans-serif; line-height: 1.6;">
        <h2>Welcome to AI CV Maker!</h2>
        <p>Please verify your email address to complete your registration and activate your account.</p>
        <p>Click the link below to verify your email:</p>
        <p><a href="${verificationLink}" style="background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Verify Email Address</a></p>
        <p>If you did not create an account, no further action is required.</p>
        <p>This link will expire in 24 hours.</p>
        <hr/>
        <p style="font-size: 0.9em; color: #777;">If you're having trouble clicking the button, copy and paste the URL below into your web browser:<br/>${verificationLink}</p>
      </div>
    `,
  };

  try {
    await mailTransporter.sendMail(mailOptions);
    console.log(`Verification email sent to ${email}`);
  } catch (error) {
    console.error(`Error sending verification email to ${email}:`, error);
    throw new Error('Failed to send verification email. Please try again later.');
  }
};

const sendPasswordResetEmail = async (email, token) => {
  const resetLink = `${process.env.FRONTEND_BASE_URL || 'http://localhost:5173'}/#/reset-password?token=${token}`;
  const mailOptions = {
    from: `"${process.env.SMTP_FROM_NAME || 'AI CV Maker'}" <${process.env.SMTP_FROM_EMAIL || 'noreply@aicvmaker.com'}>`,
    to: email,
    subject: 'Password Reset Request - AI CV Maker',
    html: `
      <div style="font-family: Arial, sans-serif; line-height: 1.6;">
        <h2>Password Reset Request</h2>
        <p>You recently requested to reset your password for your AI CV Maker account.</p>
        <p>Click the link below to reset it:</p>
        <p><a href="${resetLink}" style="background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Reset Your Password</a></p>
        <p>If you did not request a password reset, please ignore this email or contact support if you have concerns.</p>
        <p>This link will expire in 1 hour.</p>
        <hr/>
        <p style="font-size: 0.9em; color: #777;">If you're having trouble clicking the button, copy and paste the URL below into your web browser:<br/>${resetLink}</p>
      </div>
    `,
  };
  try {
    await mailTransporter.sendMail(mailOptions);
    console.log(`Password reset email sent to ${email}`);
  } catch (error) {
    console.error(`Error sending password reset email to ${email}:`, error);
    throw new Error('Failed to send password reset email. Please try again later.');
  }
};


// --- MySQL Database Setup ---
const dbConfig = {
  host: process.env.DB_HOST || 'localhost',
  user: process.env.DB_USER || 'root',
  password: process.env.DB_PASSWORD || 'password',
  database: process.env.DB_NAME || 'aicvmakeroauth',
  port: process.env.DB_PORT ? parseInt(process.env.DB_PORT, 10) : 3306,
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0
};

let db;

async function initializeDatabase() {
  try {
    const tempConnectionForDbCreation = await mysql.createConnection({
      host: dbConfig.host,
      user: dbConfig.user,
      password: dbConfig.password,
      port: dbConfig.port
    });
    await tempConnectionForDbCreation.query(`CREATE DATABASE IF NOT EXISTS \`${dbConfig.database}\`;`);
    await tempConnectionForDbCreation.end();
    console.log(`Database '${dbConfig.database}' ensured.`);

    db = mysql.createPool(dbConfig);
    const connection = await db.getConnection(); 
    console.log('Successfully connected to MySQL database pool.');

    try {
      await connection.query(`
        CREATE TABLE IF NOT EXISTS users (
          id INT AUTO_INCREMENT PRIMARY KEY,
          email VARCHAR(255) NOT NULL UNIQUE,
          password VARCHAR(255), 
          name VARCHAR(255),
          google_id VARCHAR(255) UNIQUE,
          role VARCHAR(50) DEFAULT 'user',
          is_email_verified BOOLEAN DEFAULT FALSE,
          email_verification_token VARCHAR(255) NULL,
          email_verification_token_expires_at TIMESTAMP NULL,
          password_reset_token VARCHAR(255) NULL,
          password_reset_token_expires_at TIMESTAMP NULL,
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );
      `);
      console.log('Users table core structure ensured (with role, verification & password reset fields).');
      
      const columnsToAdd = [
        { name: 'google_id', type: 'VARCHAR(255) UNIQUE' },
        { name: 'role', type: "VARCHAR(50) DEFAULT 'user'" },
        { name: 'is_email_verified', type: 'BOOLEAN DEFAULT FALSE' },
        { name: 'email_verification_token', type: 'VARCHAR(255) NULL' },
        { name: 'email_verification_token_expires_at', type: 'TIMESTAMP NULL' },
        { name: 'password_reset_token', type: 'VARCHAR(255) NULL' },
        { name: 'password_reset_token_expires_at', type: 'TIMESTAMP NULL' },
      ];

      for (const col of columnsToAdd) {
        const [existingCols] = await connection.query(`SHOW COLUMNS FROM users LIKE '${col.name}';`);
        // @ts-ignore
        if (existingCols.length === 0) {
          await connection.query(`ALTER TABLE users ADD COLUMN ${col.name} ${col.type};`);
          console.log(`Added column '${col.name}' to users table.`);
        } else if (col.name === 'role') { // @ts-ignore
            if (!existingCols[0].Default || existingCols[0].Default.toLowerCase() !== "'user'") {
                 await connection.query(`ALTER TABLE users MODIFY COLUMN role ${col.type};`);
                 console.log("Updated role column default."); 
            }
        }
      }
      
      const [passwordColumns] = await connection.query("SHOW COLUMNS FROM users LIKE 'password';");
      // @ts-ignore
      if (passwordColumns.length > 0 && passwordColumns[0].Null === 'NO') {
        await connection.query("ALTER TABLE users MODIFY COLUMN password VARCHAR(255) NULL;");
        console.log('Modified password column to be nullable.');
      }
      console.log('Users table schema is up to date.');

    } finally {
      connection.release();
    }
  } catch (error) {
    console.error('Failed to initialize or connect to database:', error);
    process.exit(1);
  }
}

initializeDatabase();

// --- AI Setup ---
const aiServiceApiKey = process.env.API_KEY;
if (!aiServiceApiKey) {
  console.error("CRITICAL: API_KEY for the AI service is not set. CV generation will fail.");
}
const ai = new GoogleGenAI({ apiKey: aiServiceApiKey || "FALLBACK_KEY" }); 
const MODEL_NAME = 'gemini-1.5-flash-latest';

// --- Google OAuth Client Setup ---
const GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;
if (!GOOGLE_CLIENT_ID) {
    console.error("CRITICAL: GOOGLE_CLIENT_ID is not set. Google Sign-In will fail.");
}
const googleOAuthClient = new OAuth2Client(GOOGLE_CLIENT_ID);

// --- Google Analytics Data API Setup ---
const GA_PROPERTY_ID = process.env.GA_PROPERTY_ID;
let analyticsDataClient;
if (process.env.GOOGLE_APPLICATION_CREDENTIALS && GA_PROPERTY_ID) {
  try {
    analyticsDataClient = new BetaAnalyticsDataClient();
    console.log("Google Analytics Data API client initialized.");
  } catch (e) { // @ts-ignore
    console.error("Failed to initialize Google Analytics Data API client:", e.message);
  }
} else {
  if (!process.env.GOOGLE_APPLICATION_CREDENTIALS) console.warn("WARNING: GOOGLE_APPLICATION_CREDENTIALS not set. Real-time analytics will be disabled.");
  if (!GA_PROPERTY_ID) console.warn("WARNING: GA_PROPERTY_ID not set. Real-time analytics will be disabled.");
}

// --- Authentication API Routes ---

app.post('/api/auth/signup', async (req, res) => {
  const { email, password, name } = req.body;
  if (!email || !password || !name) return res.status(400).json({ message: 'Email, password, and name are required.' });
  if (password.length < 6) return res.status(400).json({ message: 'Password must be at least 6 characters.' });

  try { // @ts-ignore
    const [existingUsers] = await db.query('SELECT id FROM users WHERE email = ?', [email]); // @ts-ignore
    if (existingUsers.length > 0) return res.status(409).json({ message: 'Email already exists. Try logging in.' });

    const hashedPassword = await bcrypt.hash(password, 10);
    const role = email.toLowerCase() === ADMIN_EMAIL.toLowerCase() ? 'admin' : 'user';
    
    const verificationToken = crypto.randomBytes(32).toString('hex');
    const hashedToken = crypto.createHash('sha256').update(verificationToken).digest('hex');
    const tokenExpiry = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 hours

    // @ts-ignore
    const [result] = await db.query(
      'INSERT INTO users (email, password, name, role, email_verification_token, email_verification_token_expires_at, is_email_verified) VALUES (?, ?, ?, ?, ?, ?, ?)',
      [email, hashedPassword, name, role, hashedToken, tokenExpiry, false]
    );
    // @ts-ignore
    const userId = result.insertId;

    await sendVerificationEmail(email, verificationToken);
    
    console.log('User signed up, verification email sent:', { id: userId, email, name, role });
    res.status(201).json({ 
        message: 'Signup successful! Please check your email to verify your account.',
    });

  } catch (error) { // @ts-ignore
    console.error('Email signup error:', error.message); // @ts-ignore
    res.status(500).json({ message: error.message || 'An error occurred during signup.' });
  }
});

app.post('/api/auth/verify-email', async (req, res) => {
    const { token } = req.body;
    if (!token) return res.status(400).json({ message: 'Verification token is required.' });

    const hashedToken = crypto.createHash('sha256').update(token).digest('hex');

    try { // @ts-ignore
        const [users] = await db.query(
            'SELECT * FROM users WHERE email_verification_token = ? AND email_verification_token_expires_at > NOW()', 
            [hashedToken]
        );
        // @ts-ignore
        if (users.length === 0) {
            return res.status(400).json({ message: 'Invalid or expired verification token.' });
        }
        // @ts-ignore
        const user = users[0];

        if (user.is_email_verified) {
            return res.status(400).json({ message: 'Email already verified. You can log in.' });
        }
        // @ts-ignore
        await db.query(
            'UPDATE users SET is_email_verified = TRUE, email_verification_token = NULL, email_verification_token_expires_at = NULL WHERE id = ?',
            [user.id]
        );
        console.log('Email verified for user:', user.email);
        res.status(200).json({ message: 'Email successfully verified. You can now log in.' });
    } catch (error) { // @ts-ignore
        console.error('Email verification error:', error.message); // @ts-ignore
        res.status(500).json({ message: error.message || 'An error occurred during email verification.' });
    }
});


app.post('/api/auth/login', async (req, res) => {
  const { email, password } = req.body;
  if (!email || !password) return res.status(400).json({ message: 'Email and password required.' });
  try { // @ts-ignore
    const [users] = await db.query('SELECT * FROM users WHERE email = ?', [email]); // @ts-ignore
    if (users.length === 0) return res.status(401).json({ message: 'Invalid credentials.' }); // @ts-ignore
    const user = users[0];

    if (!user.is_email_verified && !user.google_id) { 
        return res.status(403).json({ message: 'Please verify your email address before logging in. Check your inbox for a verification link.', needsVerification: true, emailForResend: user.email });
    }

    if (!user.password) return res.status(401).json({ message: 'Account may use Google Sign-In or password not set.' });
    if (!await bcrypt.compare(password, user.password)) return res.status(401).json({ message: 'Invalid credentials.' });
    
    if (user.email.toLowerCase() === ADMIN_EMAIL.toLowerCase() && user.role !== 'admin') { // @ts-ignore
      await db.query('UPDATE users SET role = ? WHERE id = ?', ['admin', user.id]); user.role = 'admin';
    }
    const userToReturn = { id: user.id, email: user.email, name: user.name, role: user.role, is_email_verified: user.is_email_verified };
    res.status(200).json({ user: userToReturn, token: `mock-jwt-token-for-${user.id}`, message: 'Login successful' });
  } catch (error) { // @ts-ignore
      console.error('Login error:', error.message); // @ts-ignore
      res.status(500).json({ message: error.message ||'Login error.' });
  }
});

app.post('/api/auth/resend-verification-email', async (req, res) => {
    const { email } = req.body;
    if (!email) return res.status(400).json({ message: 'Email is required.' });

    try { // @ts-ignore
        const [users] = await db.query('SELECT * FROM users WHERE email = ?', [email]); // @ts-ignore
        if (users.length === 0) return res.status(404).json({ message: 'User with this email not found.' }); // @ts-ignore
        const user = users[0];

        if (user.is_email_verified) return res.status(400).json({ message: 'This email address is already verified.' });

        const verificationToken = crypto.randomBytes(32).toString('hex');
        const hashedToken = crypto.createHash('sha256').update(verificationToken).digest('hex');
        const tokenExpiry = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 hours
        // @ts-ignore
        await db.query(
            'UPDATE users SET email_verification_token = ?, email_verification_token_expires_at = ? WHERE id = ?',
            [hashedToken, tokenExpiry, user.id]
        );
        await sendVerificationEmail(user.email, verificationToken);
        console.log('Resent verification email to:', user.email);
        res.status(200).json({ message: 'A new verification email has been sent. Please check your inbox.' });
    } catch (error) { // @ts-ignore
        console.error('Resend verification email error:', error.message); // @ts-ignore
        res.status(500).json({ message: error.message || 'Failed to resend verification email.' });
    }
});

app.post('/api/auth/request-password-reset', async (req, res) => {
    const { email } = req.body;
    if (!email) return res.status(400).json({ message: 'Email is required.' });

    try { // @ts-ignore
        const [users] = await db.query('SELECT * FROM users WHERE email = ?', [email]); // @ts-ignore
        if (users.length > 0) { // @ts-ignore
            const user = users[0];
            if (!user.is_email_verified) {
                // Don't reveal if email exists but isn't verified, for security.
                // Just send the generic message.
                console.log(`Password reset requested for unverified email: ${email}`);
            } else {
                const resetToken = crypto.randomBytes(32).toString('hex');
                const hashedToken = crypto.createHash('sha256').update(resetToken).digest('hex');
                const tokenExpiry = new Date(Date.now() + 1 * 60 * 60 * 1000); // 1 hour
                // @ts-ignore
                await db.query(
                    'UPDATE users SET password_reset_token = ?, password_reset_token_expires_at = ? WHERE id = ?',
                    [hashedToken, tokenExpiry, user.id]
                );
                await sendPasswordResetEmail(user.email, resetToken);
                console.log(`Password reset email sent to verified user: ${email}`);
            }
        } else {
            console.log(`Password reset requested for non-existent email: ${email}`);
        }
        // Always send a generic message to prevent email enumeration
        res.status(200).json({ message: 'If an account with this email exists and is verified, a password reset link has been sent.' });
    } catch (error) { // @ts-ignore
        console.error('Request password reset error:', error.message);
        res.status(500).json({ message: 'An error occurred while processing your request.' });
    }
});

app.post('/api/auth/reset-password', async (req, res) => {
    const { token, newPassword } = req.body;
    if (!token || !newPassword) return res.status(400).json({ message: 'Token and new password are required.' });
    if (newPassword.length < 6) return res.status(400).json({ message: 'Password must be at least 6 characters.' });

    const hashedToken = crypto.createHash('sha256').update(token).digest('hex');

    try { // @ts-ignore
        const [users] = await db.query(
            'SELECT * FROM users WHERE password_reset_token = ? AND password_reset_token_expires_at > NOW()',
            [hashedToken]
        );
        // @ts-ignore
        if (users.length === 0) {
            return res.status(400).json({ message: 'Invalid or expired password reset token.' });
        }
        // @ts-ignore
        const user = users[0];
        const hashedNewPassword = await bcrypt.hash(newPassword, 10);
        // @ts-ignore
        await db.query(
            'UPDATE users SET password = ?, password_reset_token = NULL, password_reset_token_expires_at = NULL WHERE id = ?',
            [hashedNewPassword, user.id]
        );
        console.log('Password reset successfully for user:', user.email);
        res.status(200).json({ message: 'Password has been reset successfully. You can now log in with your new password.' });
    } catch (error) { // @ts-ignore
        console.error('Reset password error:', error.message);
        res.status(500).json({ message: 'An error occurred while resetting your password.' });
    }
});


app.post('/api/auth/google-signin', async (req, res) => {
  const { idToken } = req.body;
  if (!idToken) return res.status(400).json({ message: 'ID Token required.' });
  if (!GOOGLE_CLIENT_ID) return res.status(500).json({ message: 'Google Sign-In not configured on server.' });
  try {
    const ticket = await googleOAuthClient.verifyIdToken({ idToken, audience: GOOGLE_CLIENT_ID });
    const payload = ticket.getPayload();
    if (!payload || !payload.email || !payload.sub) return res.status(400).json({ message: 'Invalid token payload.' });
    const { email, name: googleName, sub: googleId } = payload;
    const userEmail = payload.email_verified ? email : null;
    if (!userEmail) return res.status(400).json({ message: 'Google email not verified.' });
    
    const assignedRole = userEmail.toLowerCase() === ADMIN_EMAIL.toLowerCase() ? 'admin' : 'user';
    // @ts-ignore
    let [usersFromDb] = await db.query('SELECT * FROM users WHERE google_id = ? OR email = ?', [googleId, userEmail]);
    // @ts-ignore
    let user = usersFromDb[0];

    if (user) { 
      let roleToUpdate = user.role;
      if (user.email.toLowerCase() === ADMIN_EMAIL.toLowerCase() && user.role !== 'admin') roleToUpdate = 'admin';
      
      let fieldsToUpdate = ['is_email_verified = TRUE']; 
      let valuesToUpdate = [];

      if (!user.google_id && user.email === userEmail) { fieldsToUpdate.push('google_id = ?'); valuesToUpdate.push(googleId); }
      if (roleToUpdate !== user.role) { fieldsToUpdate.push('role = ?'); valuesToUpdate.push(roleToUpdate); }
      if (googleName && user.name !== googleName) { fieldsToUpdate.push('name = ?'); valuesToUpdate.push(googleName); }
      
      if (fieldsToUpdate.length > 0) { // @ts-ignore
        await db.query(`UPDATE users SET ${fieldsToUpdate.join(', ')} WHERE id = ?`, [...valuesToUpdate, user.id]); // @ts-ignore
        const [refetchedUser] = await db.query('SELECT * FROM users WHERE id = ?', [user.id]); user = refetchedUser[0]; 
      }
    } else { 
      // @ts-ignore
      const [result] = await db.query(
        'INSERT INTO users (email, name, google_id, role, is_email_verified) VALUES (?, ?, ?, ?, TRUE)',
        [userEmail, googleName || userEmail.split('@')[0], googleId, assignedRole]
      ); // @ts-ignore
      user = { id: result.insertId, email: userEmail, name: googleName || userEmail.split('@')[0], google_id: googleId, role: assignedRole, is_email_verified: true };
    }
    const userToReturn = { id: user.id, email: user.email, name: user.name, role: user.role, is_email_verified: user.is_email_verified };
    res.status(200).json({ user: userToReturn, token: `mock-jwt-google-token-for-${user.id}`, message: 'Google Sign-In successful' });
  } catch (error) { // @ts-ignore
    if (error.message?.includes("Token used too late") || error.message?.includes("Invalid token signature")) return res.status(401).json({ message: 'Google token invalid/expired.' }); // @ts-ignore
    if (error.code === 'ER_BAD_FIELD_ERROR' || error.sqlMessage?.includes("Unknown column")) return res.status(500).json({message: "DB schema error."}); // @ts-ignore
    console.error('Google Sign-In error:', error.message); // @ts-ignore
    res.status(500).json({ message: error.message || 'Google Sign-In error.' });
  }
});

// --- CV Generation API Route ---
app.post('/api/cv/generate', async (req, res) => {
  const { jobInfo } = req.body;
  if (!jobInfo || typeof jobInfo !== 'string' || !jobInfo.trim()) return res.status(400).json({ message: 'Job info required.' });
  if (!aiServiceApiKey) return res.status(500).json({ message: "AI Service API Key not configured on the server." });
  
  const prompt = `You are an expert CV writer... (prompt truncated for brevity) Job Information: --- ${jobInfo} --- CV Outline:`;
  try {
    if (!ai.models || typeof ai.models.generateContent !== 'function') return res.status(500).json({ message: 'Server AI configuration error.' });
    
    const result = await ai.models.generateContent({ model: MODEL_NAME, contents: prompt });
    const textOutput = result.text;
    
    if (!textOutput?.trim()) return res.status(500).json({ message: 'Received an empty or invalid response from the AI model.' });
    res.json({ cvContent: textOutput });

  } catch (error) { // @ts-ignore
    console.error('Error generating CV content with AI service:', error.message); // @ts-ignore
    let errMsg = `AI generation failed: ${error.message || 'Unknown error'}`; // @ts-ignore
    const lowerMsg = error.message?.toLowerCase();
    
    if (lowerMsg?.includes("api key not valid") || lowerMsg?.includes("unauthenticated") || lowerMsg?.includes("permission denied") || lowerMsg?.includes("quota")) {
      errMsg = "There is an issue with the AI service configuration. Please contact support.";
    } else if (lowerMsg?.includes("model not found") || lowerMsg?.includes("invalid model")) {
      errMsg = "The configured AI model is currently unavailable. Please try again later or contact support.";
    }
    res.status(500).json({ message: errMsg });
  }
});

// --- Real-time Analytics API Route ---
app.get('/api/analytics/realtime-data', async (req, res) => {
  if (!analyticsDataClient || !GA_PROPERTY_ID) {
    return res.status(503).json({ 
      message: 'Real-time analytics service is not configured or unavailable.',
      activeUsers: 0,
      topPages: []
    });
  }
  try {
    const [realtimeReport] = await analyticsDataClient.runRealtimeReport({
      property: `properties/${GA_PROPERTY_ID}`,
      metrics: [{ name: 'activeUsers' }],
      dimensions: [{ name: 'unifiedScreenName' }], 
      metricAggregations: ['TOTAL'],
      limit: 5, 
    });
    let activeUsers = 0; // @ts-ignore
    if (realtimeReport.totals?.[0]?.metricValues?.[0]?.value) activeUsers = parseInt(realtimeReport.totals[0].metricValues[0].value); // @ts-ignore
    const topPages = realtimeReport.rows?.map(row => ({ name: row.dimensionValues?.[0]?.value || 'Unknown Page', users: parseInt(row.metricValues?.[0]?.value || "0") })) || [];
    res.json({ activeUsers, topPages });
  } catch (error) { // @ts-ignore
    console.error('Error fetching real-time analytics from GA Data API:', error.message); // @ts-ignore
    let errorMessage = `Failed to fetch real-time analytics: ${error.message || 'Unknown GA API Error'}`; // @ts-ignore
    if (error.code === 7 || error.message?.includes('Service account does not have permission')) errorMessage = 'Service account does not have permission to access the GA property.'; // @ts-ignore
    else if (error.message?.includes('property_not_found')) errorMessage = `GA Property ID '${GA_PROPERTY_ID}' not found.`;
    res.status(500).json({ message: errorMessage, activeUsers: 0, topPages: [] });
  }
});

// --- Start Server ---
app.listen(port, () => {
  console.log(`Backend server listening at http://localhost:${port}`);
});

```

```bash
smtp.md


# SMTP Setup Guide for AI CV Maker (smtp.md)

This guide provides "baby steps" to help you configure SMTP (Simple Mail Transfer Protocol) for your AI CV Maker application. SMTP is necessary for the application to send emails, such as account verification links and password reset instructions.

## 1. What is SMTP and Why Do You Need It?

*   **What it is:** Think of SMTP as the digital mailman for your application. It's a standard way for email servers to send messages across the internet.
*   **Why you need it:** Your AI CV Maker application needs to send emails to users for:
    *   **Account Verification:** When a new user signs up with an email and password.
    *   **Password Resets:** When a user forgets their password and requests to reset it.

Without SMTP configured, these essential features will not work.

## 2. What You Need Before You Start (Your Email Credentials)

To send emails, your application needs to log in to an email account, just like you do. You'll need the following details from your email provider:

*   **An Email Account:** This is the email address the application will use to send emails from (e.g., `admin@onlinecvgenius.com`, `yourapp@gmail.com`).
*   **Email Account Password:** The **actual password** for this specific email account.
*   **SMTP Server Address (Host):** The address of your email provider's outgoing mail server.
    *   You have: `mail.onlinecvgenius.com`
*   **SMTP Port Number:** The specific "door number" on the server for sending email.
    *   You have: `465` (This is common for SSL/TLS encrypted connections).
*   **Encryption Method (SSL/TLS):** Whether the connection to the SMTP server should be encrypted.
    *   You have port `465`, which typically means `SMTP_SECURE=true` (SSL/TLS).

## 3. Finding Your SMTP Details (If You Didn't Have Them)

If you're using a different email provider or need to find these details, here's how:

*   **General Advice:** The best place to find SMTP settings is your email provider's official help or support documentation. Search online for "SMTP settings for [Your Email Provider's Name]".
*   **Common Email Providers:**
    *   **Gmail / Google Workspace:**
        *   Host: `smtp.gmail.com`
        *   Port: `465` (for SSL) or `587` (for TLS/STARTTLS)
        *   Secure: `true` for port 465, `false` for port 587.
        *   User: Your full Gmail address (e.g., `youremail@gmail.com`).
        *   Password: Your Gmail password. **Important for Gmail:** It's highly recommended to use an **"App Password"** instead of your main Google account password for better security. (Search "Google App Passwords" to learn how to generate one).
    *   **Outlook.com / Microsoft 365:**
        *   Host: `smtp.office365.com`
        *   Port: `587` (for TLS/STARTTLS)
        *   Secure: `false` (Nodemailer will use STARTTLS automatically on this port if secure is false).
        *   User: Your full Outlook/Microsoft email address.
        *   Password: Your email account password.
    *   **Custom Domain Email Hosting (like your `onlinecvgenius.com`):**
        *   These details are provided by your email hosting company (often the same as your web hosting company).
        *   **Your current details for `admin@onlinecvgenius.com` appear to be:**
            *   SMTP Host: `mail.onlinecvgenius.com`
            *   SMTP Port: `465`
            *   SMTP Secure setting: `true`
            *   SMTP User: `admin@onlinecvgenius.com`
            *   SMTP Password: **YOUR_ACTUAL_PASSWORD_FOR_admin@onlinecvgenius.com** (Ensure this is correct and secure. The value `fb3bbc2c3ddr` from your original prompt is an example and likely incorrect if you see authentication errors).

## 4. Setting Up Your `.env` File

The `.env` file in your project's main folder stores configuration and secrets. Your backend server (`server/main.js`) reads these SMTP settings.

1.  **Locate or Create `.env`:** Make sure you have a `.env` file in the root directory of your project.
2.  **Add/Update SMTP Variables:** Add or modify the following lines in your `.env` file, replacing the example values with **your actual credentials**:

    ```dotenv
    # --------------------- SMTP / Email Configuration ----------------------
    # Hostname for your outgoing (SMTP) mail server
    SMTP_HOST=mail.onlinecvgenius.com

    # Port for SMTP: 465 for SSL/TLS, 587 for STARTTLS
    SMTP_PORT=465

    # Use 'true' if your SMTP_PORT is 465 (SSL/TLS).
    # Use 'false' if your SMTP_PORT is 587 (Nodemailer will try STARTTLS).
    SMTP_SECURE=true

    # The email address your application will use to send emails.
    SMTP_USER=admin@onlinecvgenius.com

    # The password for the SMTP_USER email account.
    # !! VERY IMPORTANT: Use your REAL password. Keep this file and password SECRET. !!
    # !! The example password 'fb3bbc2c3ddr' WILL NOT WORK if it's not your actual password. !!
    # !! DO NOT commit your actual password to Git or GitHub. !!
    SMTP_PASS=YOUR_ACTUAL_EMAIL_PASSWORD_FOR_admin@onlinecvgenius.com_HERE

    # The "From" email address that recipients will see.
    SMTP_FROM_EMAIL=admin@onlinecvgenius.com

    # The "From" name that recipients will see (e.g., "AI CV Maker", "Online CV Genius").
    SMTP_FROM_NAME="Online CV Genius"
    # -----------------------------------------------------------------------
    ```

    *   `SMTP_HOST`: The address of your mail server (e.g., `mail.onlinecvgenius.com`).
    *   `SMTP_PORT`: The port number (e.g., `465` or `587`).
    *   `SMTP_SECURE`:
        *   Set to `true` if you're using port `465` (SSL/TLS).
        *   Set to `false` if you're using port `587` (Nodemailer will attempt STARTTLS, which is also secure).
    *   `SMTP_USER`: The full email address that the application will use to log in and send emails (e.g., `admin@onlinecvgenius.com`).
    *   `SMTP_PASS`: The **actual password** for the `SMTP_USER` email account. **This is highly sensitive and is the most common cause for authentication errors if incorrect.**
    *   `SMTP_FROM_EMAIL`: The email address that will appear in the "From" field of the emails sent by the application. This can often be the same as `SMTP_USER`.
    *   `SMTP_FROM_NAME`: The name that will appear next to the "From" email address (e.g., "Online CV Genius", "AI CV Maker Support").

## 5. Crucial: `FRONTEND_BASE_URL` for Email Links

Your backend server uses the `FRONTEND_BASE_URL` variable from your `.env` file to create the full clickable links in verification and password reset emails.

*   **This URL must be the exact address (including http/https and port) where your frontend application is running and accessible to users.**
*   If this is incorrect, users will click links that lead to the wrong place.

    ```dotenv
    # Frontend Base URL (for generating links in emails by the backend)
    # IMPORTANT: This MUST match the URL (including port) your frontend Vite dev server is accessible at,
    # or your production domain.
    # Example if Vite frontend runs on port 5173:
    FRONTEND_BASE_URL=http://localhost:5173
    # Example if Vite frontend runs on port 3000:
    # FRONTEND_BASE_URL=http://localhost:3000
    # For production:
    # FRONTEND_BASE_URL=https://www.yourdomain.com
    ```
    *(Adjust based on the port your Vite frontend actually runs on, e.g., `5173` as seen in your logs, or other ports like `3000`, `5174` if you change Vite's config).*

## 6. Restart Your Backend Server

Whenever you make changes to the `.env` file, your backend Node.js server **must be restarted** for the changes to take effect.

*   If it's running, stop it (e.g., `Ctrl+C` in the terminal).
*   Start it again (e.g., `node server/main.js` or `npm run start-backend` if you have such a script).

## 7. Testing - Did It Work?

The best way to test your SMTP setup is to trigger an email from the application:

1.  **Ensure `SMTP_PASS` in `.env` is correct.**
2.  **Restart your backend server.**
3.  **Try signing up a new user** with an email address you can access.
4.  Check the inbox (and spam/junk folder) of that email address for the verification email.
5.  If it arrives and the link works, your basic setup is good!
6.  You can also test the "Forgot Password" feature.

## 8. Common Problems & Solutions (Troubleshooting)

*   **Error: "535 Incorrect authentication data" or "Invalid login" in backend logs:**
    *   **This is almost always due to an incorrect `SMTP_PASS` for the given `SMTP_USER` and `SMTP_HOST`.**
    *   **ACTION:** Verify your `SMTP_USER` (e.g., `admin@onlinecvgenius.com`) and **especially your `SMTP_PASS`** in the `.env` file. Ensure it's the exact, current password for that email account on `mail.onlinecvgenius.com`.
    *   The placeholder `fb3bbc2c3ddr` from your original prompt **must be replaced** with your real password.
*   **No email received:**
    *   **Typos:** Double-check every `SMTP_` variable in your `.env` file for typos.
    *   **Incorrect Password:** (See above) This is the most common issue.
    *   **Server Logs:** Check the console output of your backend server (`server/main.js`) when you try to send an email. Nodemailer usually prints helpful error messages.
    *   **Spam/Junk:** Always check the spam or junk folder of the recipient.
    *   **`FRONTEND_BASE_URL`:** While not stopping emails from sending, an incorrect `FRONTEND_BASE_URL` will make links in emails unusable.
    *   **Email Provider Security:**
        *   **Gmail:** If using Gmail and not an App Password, you might need to enable "Less Secure App Access" in your Google account settings (not recommended for long-term). Using an App Password is the correct way.
        *   Other providers might have similar security features or require specific IP whitelisting for third-party applications.
    *   **Firewall:** A firewall on your computer or network might be blocking outgoing connections on the `SMTP_PORT`.
    *   **Port/Secure Mismatch:** Ensure `SMTP_PORT` and `SMTP_SECURE` match your provider's requirements (e.g., port 465 usually needs `SMTP_SECURE=true`; port 587 usually needs `SMTP_SECURE=false`). Your current `.env` lists `SMTP_PORT=465` and `SMTP_SECURE=true` which should be correct for SSL/TLS.
*   **Links in email don't work or go to the wrong page:**
    *   Verify `FRONTEND_BASE_URL` in `.env` is exactly where your frontend application runs and is accessible (e.g., `http://localhost:5173`).

## 9. Very Important Security Reminders!

*   **Keep `.env` SECRET:** Your `.env` file contains sensitive information like database passwords and your SMTP password.
    *   **NEVER commit the `.env` file to Git or share it publicly.** The file `.gitignore` in your project should already list `.env` to prevent this.
*   **Strong SMTP Password:** Use a strong, unique password for the email account specified in `SMTP_USER`.
*   **Gmail App Passwords:** If using Gmail, **strongly consider using an "App Password"**. This is a 16-digit passcode that gives an app permission to access your Google Account, and it's more secure than using your main password.

## 10. Note on `VITE_API_URL` and `VITE_CLIENT_URL` in `.env`

Your `.env` file can also contain variables prefixed with `VITE_` for your frontend code.

*   `VITE_GOOGLE_CLIENT_ID`: Used by your frontend for the Google Sign-In button.
*   `VITE_API_URL`: If your frontend makes absolute API calls (e.g., `fetch(\`\${import.meta.env.VITE_API_URL}/auth/login\`)`), this should be your backend's base URL (e.g., `http://localhost:3001`). However, if you use Vite's proxy (recommended) and your service calls are relative (e.g., `fetch('/api/auth/login')`), this variable might not be actively used for those calls.
*   `VITE_CLIENT_URL`: This would typically be the URL of your frontend application itself (e.g., `http://localhost:5173`). Its usage depends on whether your frontend code specifically needs to reference its own base URL.

**The most important URL for email functionality is `FRONTEND_BASE_URL` (without `VITE_` prefix) in your `.env`, as this is used by the backend to construct the links.**

---

By following these steps, and **critically ensuring your `SMTP_PASS` is correct**, you should be able to configure SMTP and get email sending working in your AI CV Maker application. Remember to prioritize security with your credentials!
## Debugging Checklist from Root Cause Analysis (Recap)

### 1. **Test Network Connectivity First**
```powershell
# Always test if you can reach the SMTP server
Test-NetConnection -ComputerName mail.onlinecvgenius.com -Port 465
```
- ✅ If `TcpTestSucceeded: True` → Network is OK
- ❌ If `TcpTestSucceeded: False` → Network/firewall blocking. Try a different network (e.g., home WiFi, mobile hotspot) if on a corporate network.

### 2. **Test Without Environment Variables (in `server/main.js` temporarily)**
If network is OK, but emails still fail, temporarily hardcode SMTP values in `server/main.js` to isolate if `.env` parsing is the issue.
```javascript
// In server/main.js, for testing only:
// const smtpConfig = {
//   host: 'mail.onlinecvgenius.com',
//   port: 465,
//   secure: true, // For port 465
//   auth: {
//     user: 'admin@onlinecvgenius.com',
//     pass: 'YOUR_ACTUAL_PASSWORD_HERE' // Direct password
//   },
// };
// REMEMBER TO REMOVE HARDCODED VALUES AFTER TESTING!
```
- ✅ If this works → Issue is with `.env` file loading or parsing.
- ❌ If this fails → Issue is likely wrong credentials, server-side email config, or the email provider itself.

### 3. **Check `.env` File Rules (VERY IMPORTANT)**
- ✅ **DO**: Comments on separate lines:
  ```env
  # This is a comment
  SMTP_PORT=465
  ```
- ❌ **DON'T**: Inline comments:
  ```env
  SMTP_PORT=465 # This breaks, the value becomes "465 # This breaks"
  ```
- ❌ **DON'T**: Quotes around values (unless the value itself contains spaces, which is rare for these settings):
  ```env
  SMTP_USER="admin@onlinecvgenius.com"  # Usually not needed, can sometimes cause issues
  SMTP_USER=admin@onlinecvgenius.com    # Better
  ```
- **CHECK FOR HIDDEN CHARACTERS/SPACES**: Especially at the end of lines in your `.env` file.

### 4. **SMTP Port Guidelines (Confirm `SMTP_SECURE` setting)**
| Port | `SMTP_SECURE` in `.env` | Typical Use Case         |
|------|-------------------------|--------------------------|
| 25   | `false`                 | Often blocked, legacy    |
| 465  | `true`                  | SSL/TLS from the start   |
| 587  | `false`                 | STARTTLS (upgrades to secure) |
| 2525 | `false`                 | Alternative, often STARTTLS |

**Your current `.env` values `SMTP_PORT=465` and `SMTP_SECURE=true` are consistent for an SSL/TLS connection.** If this combination fails, and `Test-NetConnection` on port 465 works, the primary suspect becomes the `SMTP_USER` or `SMTP_PASS`.

### 5. **Verify `SMTP_USER` and `SMTP_PASS`**
- This is the **most common point of failure** if network and port settings seem correct.
- Double, triple-check the `SMTP_PASS` for `admin@onlinecvgenius.com`.
- **Log in to `mail.onlinecvgenius.com` webmail** (if available) with these exact credentials to confirm they are correct.
- If you recently changed the password, ensure the `.env` file is updated.

### 6. **Contact Email Provider Support**
If all else fails, your email hosting provider for `onlinecvgenius.com` may have specific security measures, IP restrictions, or logs that can help diagnose why authentication is failing from your application's server.

By systematically going through these, especially focusing on the `.env` file formatting and the accuracy of `SMTP_PASS`, you should be able to resolve the "Incorrect authentication data" error.

```

```bash
test.js


// test-password-reset.js
import nodemailer from 'nodemailer';
import dotenv from 'dotenv';

dotenv.config();

async function testPasswordResetEmail() {
    const smtpConfig = {
        host: process.env.SMTP_HOST,
        port: parseInt(process.env.SMTP_PORT || "587", 10),
        secure: process.env.SMTP_SECURE === 'true',
        auth: {
            user: process.env.SMTP_USER,
            pass: process.env.SMTP_PASS,
        },
        debug: true,
        logger: true
    };

    console.log('SMTP Config:', {
        ...smtpConfig,
        auth: { user: smtpConfig.auth.user, pass: '***hidden***' }
    });

    const transporter = nodemailer.createTransport(smtpConfig);

    try {
        await transporter.verify();
        console.log('SMTP connection verified successfully');

        const info = await transporter.sendMail({
            from: `"${process.env.SMTP_FROM_NAME}" <${process.env.SMTP_FROM_EMAIL}>`,
            to: 'waseemrazakhan0@gmail.com',
            subject: 'Test Password Reset Email',
            html: '<p>This is a test password reset email.</p>'
        });

        console.log('Test email sent:', info.messageId);
    } catch (error) {
        console.error('Email test failed:', error);
    }
}

testPasswordResetEmail();
```

```bash
tsconfig.json



{
  "compilerOptions": {
    "target": "ES2020",
    "experimentalDecorators": true,
    "useDefineForClassFields": false,
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "allowJs": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true,
    "types": ["vite/client", "node", "react/jsx-runtime"],


    "paths": {
      "@/*" :  ["./*"]
    }
  },
  "include": ["src", "components", "pages", "App.tsx", "index.tsx", "constants.tsx", "services", "vite.config.ts"],
  "references": [{ "path": "./tsconfig.node.json" }]
}

```

```bash
tsconfig.node.json



{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "noEmit": true,     
    "types": ["node"] 
  },
  "include": ["vite.config.ts", "server/**/*.js"]
}

```